{
  "version": 3,
  "sources": ["../../@rollthecloudinc/crud/fesm2022/rollthecloudinc-crud.mjs"],
  "sourcesContent": ["import { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { forwardRef, Input, Component, Injectable, NgModule } from '@angular/core';\nimport * as i1 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport * as i4 from '@rollthecloudinc/context';\nimport { ContextModule } from '@rollthecloudinc/context';\nimport * as i6 from '@rollthecloudinc/dparam';\nimport { Param, DparamModule } from '@rollthecloudinc/dparam';\nimport { MaterialModule } from '@rollthecloudinc/material';\nimport { BehaviorSubject, combineLatest, of, forkJoin, iif, Observable, ReplaySubject } from 'rxjs';\nimport { map, tap, filter, delay, debounceTime, switchMap, take, defaultIfEmpty } from 'rxjs/operators';\nimport qs from 'qs';\nimport * as i1$1 from '@rollthecloudinc/plugin';\nimport { Plugin, BasePluginManager, PluginDef } from '@rollthecloudinc/plugin';\nimport * as i2 from '@rollthecloudinc/attributes';\nimport * as i3 from '@angular/material/input';\nimport * as i1$2 from '@rollthecloudinc/datasource';\nimport { DatasourcePlugin, DatasourceEditorOptions, Dataset } from '@rollthecloudinc/datasource';\nimport * as i3$1 from '@rollthecloudinc/refinery';\nimport { DataductPlugin, DuctdataOutput } from '@rollthecloudinc/refinery';\nimport * as uuid from 'uuid';\nimport * as i2$1 from '@rollthecloudinc/utils';\nimport * as jre from 'json-rules-engine';\nimport * as rd from 'recursive-diff';\nimport * as i8 from '@rollthecloudinc/durl';\nclass CrudAdaptorPlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    if (data) {\n      this.create = data.create;\n      this.read = data.read;\n      this.update = data.update;\n      this.delete = data.delete;\n      if (data.query) {\n        this.query = data.query;\n      }\n    }\n  }\n}\nclass CrudAdaptorDatasource {\n  constructor(data) {\n    this.options = [];\n    this.params = [];\n    if (data) {\n      this.adaptorName = data.adaptorName;\n      this.optionsString = data.optionsString ? data.optionsString : undefined;\n      this.paramsString = data.paramsString ? data.paramsString : undefined;\n      if (data.options && Array.isArray(data.options)) {\n        this.options = data.options.map(o => new Param(o));\n      }\n      if (data.params && Array.isArray(data.params)) {\n        this.params = data.params.map(p => new Param(p));\n      }\n    }\n  }\n}\nclass CrudAdaptorDatasourceFormComponent {\n  set settings(settings) {\n    this.settings$.next(settings);\n  }\n  constructor(fb, attributeSerializer) {\n    this.fb = fb;\n    this.attributeSerializer = attributeSerializer;\n    this.contexts = [];\n    this.settings$ = new BehaviorSubject(undefined);\n    this.datasource$ = new BehaviorSubject(undefined);\n    this.optionValues$ = new BehaviorSubject([]);\n    this.paramValues$ = new BehaviorSubject([]);\n    this.formGroup = this.fb.group({\n      adaptorName: this.fb.control(''),\n      optionsString: this.fb.control(''),\n      paramsString: this.fb.control(''),\n      options: this.fb.control([]),\n      params: this.fb.control([])\n    });\n    this.settingsSub = this.settings$.pipe(map(s => s ? new CrudAdaptorDatasource(this.attributeSerializer.deserializeAsObject(s)) : undefined), tap(ds => setTimeout(() => this.datasource$.next(ds)))).subscribe(ds => {\n      if (ds) {\n        this.formGroup.get('adaptorName').setValue(ds.adaptorName);\n        this.formGroup.get('optionsString').setValue(ds.optionsString ? ds.optionsString : '');\n        this.formGroup.get('paramsString').setValue(ds.paramsString ? ds.paramsString : '');\n      } else {\n        this.formGroup.get('adaptorName').setValue('');\n        this.formGroup.get('optionsString').setValue('');\n        this.formGroup.get('paramsString').setValue('');\n        setTimeout(() => this.optionValues$.next([]), 2);\n        setTimeout(() => this.optionValues$.next([]), 2);\n      }\n    });\n    this.datasourceOptionsSub = combineLatest([this.datasource$, this.formGroup.get('optionsString').valueChanges]).pipe(filter(([ds]) => ds !== undefined), delay(1), tap(([ds]) => this.optionValues$.next(ds.options))).subscribe();\n    this.datasourceParamsSub = combineLatest([this.datasource$, this.formGroup.get('paramsString').valueChanges]).pipe(filter(([ds]) => ds !== undefined), delay(1), tap(([ds]) => this.paramValues$.next(ds.params))).subscribe();\n    this.optionsStringChangeSub = this.formGroup.get('optionsString').valueChanges.pipe(debounceTime(500)).subscribe(optionsString => {\n      const parsed = qs.parse('?' + optionsString);\n      this.optionsParsed = parsed;\n    });\n    this.paramsStringChangeSub = this.formGroup.get('paramsString').valueChanges.pipe(debounceTime(500)).subscribe(paramsString => {\n      const parsed = qs.parse('?' + paramsString);\n      this.paramsParsed = parsed;\n    });\n    this.onTouched = () => {};\n  }\n  ngOnInit() {}\n  writeValue(val) {\n    if (val) {\n      this.formGroup.setValue(val, {\n        emitEvent: false\n      });\n    }\n  }\n  registerOnChange(fn) {\n    this.formGroup.valueChanges.subscribe(fn);\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    if (isDisabled) {\n      this.formGroup.disable();\n    } else {\n      this.formGroup.enable();\n    }\n  }\n  validate(c) {\n    return this.formGroup.valid ? null : this.formGroup.errors;\n  }\n  static {\n    this.\u0275fac = function CrudAdaptorDatasourceFormComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CrudAdaptorDatasourceFormComponent)(i0.\u0275\u0275directiveInject(i1.UntypedFormBuilder), i0.\u0275\u0275directiveInject(i2.AttributeSerializerService));\n    };\n  }\n  static {\n    this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n      type: CrudAdaptorDatasourceFormComponent,\n      selectors: [[\"classifieds-ui-crud-adaptor-datasource-form\"]],\n      inputs: {\n        contexts: \"contexts\",\n        settings: \"settings\"\n      },\n      standalone: false,\n      features: [i0.\u0275\u0275ProvidersFeature([{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => CrudAdaptorDatasourceFormComponent),\n        multi: true\n      }, {\n        provide: NG_VALIDATORS,\n        useExisting: forwardRef(() => CrudAdaptorDatasourceFormComponent),\n        multi: true\n      }])],\n      decls: 14,\n      vars: 7,\n      consts: [[3, \"formGroup\"], [\"matInput\", \"\", \"placeholder\", \"Adaptor\", \"formControlName\", \"adaptorName\", \"required\", \"\"], [1, \"options-container\"], [\"matInput\", \"\", \"placeholder\", \"Options\", \"formControlName\", \"optionsString\"], [\"formControlName\", \"options\", 3, \"params\", \"paramValues\", \"contexts\"], [1, \"params-container\"], [\"matInput\", \"\", \"placeholder\", \"Params\", \"formControlName\", \"paramsString\"], [\"formControlName\", \"params\", 3, \"params\", \"paramValues\", \"contexts\"]],\n      template: function CrudAdaptorDatasourceFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275elementStart(0, \"div\", 0)(1, \"div\")(2, \"mat-form-field\");\n          i0.\u0275\u0275element(3, \"input\", 1);\n          i0.\u0275\u0275elementEnd()();\n          i0.\u0275\u0275elementStart(4, \"div\", 2)(5, \"div\")(6, \"mat-form-field\");\n          i0.\u0275\u0275element(7, \"input\", 3);\n          i0.\u0275\u0275elementEnd()();\n          i0.\u0275\u0275element(8, \"classifieds-ui-params-form\", 4);\n          i0.\u0275\u0275elementEnd();\n          i0.\u0275\u0275elementStart(9, \"div\", 5)(10, \"div\")(11, \"mat-form-field\");\n          i0.\u0275\u0275element(12, \"input\", 6);\n          i0.\u0275\u0275elementEnd()();\n          i0.\u0275\u0275element(13, \"classifieds-ui-params-form\", 7);\n          i0.\u0275\u0275elementEnd()();\n        }\n        if (rf & 2) {\n          i0.\u0275\u0275property(\"formGroup\", ctx.formGroup);\n          i0.\u0275\u0275advance(8);\n          i0.\u0275\u0275property(\"params\", ctx.optionsParsed)(\"paramValues\", ctx.optionValues$.value)(\"contexts\", ctx.contexts);\n          i0.\u0275\u0275advance(5);\n          i0.\u0275\u0275property(\"params\", ctx.paramsParsed)(\"paramValues\", ctx.paramValues$.value)(\"contexts\", ctx.contexts);\n        }\n      },\n      dependencies: [i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName, i3.MatInput, i3.MatFormField, i6.ParamsFormComponent],\n      encapsulation: 2\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(CrudAdaptorDatasourceFormComponent, [{\n    type: Component,\n    args: [{\n      selector: 'classifieds-ui-crud-adaptor-datasource-form',\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => CrudAdaptorDatasourceFormComponent),\n        multi: true\n      }, {\n        provide: NG_VALIDATORS,\n        useExisting: forwardRef(() => CrudAdaptorDatasourceFormComponent),\n        multi: true\n      }],\n      standalone: false,\n      template: \"<div [formGroup]=\\\"formGroup\\\">\\n  <div>\\n    <mat-form-field>\\n      <input matInput placeholder=\\\"Adaptor\\\" formControlName=\\\"adaptorName\\\" required>\\n    </mat-form-field>\\n  </div>\\n  <div class=\\\"options-container\\\">\\n    <div>\\n      <mat-form-field>\\n        <input matInput placeholder=\\\"Options\\\" formControlName=\\\"optionsString\\\">\\n      </mat-form-field>\\n    </div>\\n    <classifieds-ui-params-form formControlName=\\\"options\\\" [params]=\\\"optionsParsed\\\" [paramValues]=\\\"optionValues$.value\\\" [contexts]=\\\"contexts\\\"></classifieds-ui-params-form>\\n  </div>\\n  <div class=\\\"params-container\\\">\\n    <div>\\n      <mat-form-field>\\n        <input matInput placeholder=\\\"Params\\\" formControlName=\\\"paramsString\\\">\\n      </mat-form-field>\\n    </div>\\n    <classifieds-ui-params-form formControlName=\\\"params\\\" [params]=\\\"paramsParsed\\\" [paramValues]=\\\"paramValues$.value\\\" [contexts]=\\\"contexts\\\"></classifieds-ui-params-form>\\n  </div>\\n</div>\"\n    }]\n  }], () => [{\n    type: i1.UntypedFormBuilder\n  }, {\n    type: i2.AttributeSerializerService\n  }], {\n    contexts: [{\n      type: Input\n    }],\n    settings: [{\n      type: Input\n    }]\n  });\n})();\nclass CrudAdaptorDatasourceComponent {\n  constructor(controlContainer) {\n    this.controlContainer = controlContainer;\n    this.settings = [];\n    this.contexts = [];\n  }\n  static {\n    this.\u0275fac = function CrudAdaptorDatasourceComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CrudAdaptorDatasourceComponent)(i0.\u0275\u0275directiveInject(i1.ControlContainer));\n    };\n  }\n  static {\n    this.\u0275cmp = /* @__PURE__ */i0.\u0275\u0275defineComponent({\n      type: CrudAdaptorDatasourceComponent,\n      selectors: [[\"classifieds-ui-crud-adaptor-datasource\"]],\n      inputs: {\n        settings: \"settings\",\n        contexts: \"contexts\"\n      },\n      standalone: false,\n      decls: 2,\n      vars: 3,\n      consts: [[3, \"formGroup\"], [\"formControlName\", \"settings\", 3, \"settings\", \"contexts\"]],\n      template: function CrudAdaptorDatasourceComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.\u0275\u0275elementContainerStart(0, 0);\n          i0.\u0275\u0275element(1, \"classifieds-ui-crud-adaptor-datasource-form\", 1);\n          i0.\u0275\u0275elementContainerEnd();\n        }\n        if (rf & 2) {\n          i0.\u0275\u0275property(\"formGroup\", ctx.controlContainer.control);\n          i0.\u0275\u0275advance();\n          i0.\u0275\u0275property(\"settings\", ctx.settings)(\"contexts\", ctx.contexts);\n        }\n      },\n      dependencies: [i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, CrudAdaptorDatasourceFormComponent],\n      encapsulation: 2\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(CrudAdaptorDatasourceComponent, [{\n    type: Component,\n    args: [{\n      selector: 'classifieds-ui-crud-adaptor-datasource',\n      template: `<ng-container [formGroup]=\"controlContainer.control\"><classifieds-ui-crud-adaptor-datasource-form formControlName=\"settings\" [settings]=\"settings\" [contexts]=\"contexts\"></classifieds-ui-crud-adaptor-datasource-form></ng-container>`,\n      standalone: false\n    }]\n  }], () => [{\n    type: i1.ControlContainer\n  }], {\n    settings: [{\n      type: Input\n    }],\n    contexts: [{\n      type: Input\n    }]\n  });\n})();\n\n// import { ParamContextExtractorService } from '@rollthecloudinc/context';\nconst crudAdaptorDatasourcePluginFactory = (paramContextExtractor, attributeSerializer, cpm, paramEvaluatorService, crudDataHelper, urlGenerator) => {\n  return new DatasourcePlugin({\n    id: 'crud_adaptor',\n    title: 'Crud Adaptor',\n    editor: CrudAdaptorDatasourceComponent,\n    fetch: ({\n      settings,\n      metadata\n    }) => of(new Dataset()).pipe(map(() => attributeSerializer.deserializeAsObject(settings)), map(s => new CrudAdaptorDatasource(s)), switchMap(ds => cpm.getPlugin(ds.adaptorName).pipe(map(plugin => ({\n      plugin,\n      ds\n    })))), map(({\n      plugin,\n      ds\n    }) => ({\n      plugin,\n      ds,\n      optionNames: ds.optionsString ? ds.optionsString.split('&').filter(v => v.indexOf('=:') !== -1).map(v => v.split('=', 2)[1].substr(1)) : []\n    })), switchMap(({\n      plugin,\n      ds,\n      optionNames\n    }) => forkJoin([paramEvaluatorService.paramValues(ds.options.reduce((p, c, i) => new Map([...p, [optionNames[i], c]]), new Map())).pipe(map(params => Array.from(params).reduce((p, [k, v]) => ({\n      ...p,\n      [k]: v\n    }), {}))), ds.paramsString && ds.paramsString !== '' ? urlGenerator.getUrl('?' + ds.paramsString, ds.params, metadata).pipe(take(1)) : of(undefined)]).pipe(map(([options, query]) => ({\n      plugin,\n      options,\n      query\n    })))), switchMap(({\n      plugin,\n      options,\n      query\n    }) => crudDataHelper.evaluateCollectionPlugins({\n      plugins: {\n        [plugin.id]: {\n          params: options\n        }\n      },\n      op: 'query',\n      query: query ? query.substr(1) : query\n    })), map(results => new Dataset({\n      results\n    }))),\n    editorOptions: () => of(new DatasourceEditorOptions({\n      fullscreen: true\n    })),\n    getBindings: ({\n      settings,\n      metadata\n    }) => of([]) /*.pipe(\n                 map(() => attributeSerializer.deserializeAsObject(settings)),\n                 map<any, CrudAdaptorDatasource>(s => new EntityDatasource(s)),\n                 switchMap(ds => paramContextExtractor.extractContexts(ds.params)),\n                 map(contexts => contexts.map(id => new ContentBinding({ id, type: 'context' })))\n                 )*/\n  });\n};\nconst crudDataductPluginFactory = ({\n  crudDataHelper,\n  attributeSerializer\n}) => new DataductPlugin({\n  id: 'crud',\n  title: 'Crud',\n  editor: CrudAdaptorDatasourceComponent,\n  send: input => of(new DuctdataOutput({})).pipe(map(() => ({\n    settings: attributeSerializer.deserializeAsObject(input.settings)\n  })), tap(({\n    settings\n  }) => console.log('crud data duct', settings)), map(({\n    settings\n  }) => ({\n    plugins: {\n      [`${settings.adaptorName}`]: {\n        plugin: `${settings.adaptorName}`,\n        ops: ['create'],\n        params: `${settings.optionsString}`.split('&').reduce((p, c, i) => ({\n          ...p,\n          [c.split('=', 1)[0]]: new Param(settings.options[i])\n        }), {})\n      }\n    }\n  })), switchMap(({\n    plugins\n  }) => crudDataHelper.evaluatePlugins({\n    object: input.data,\n    plugins,\n    op: 'create',\n    parentObject: {\n      id: uuid.v4()\n    }\n  })), map(() => new DuctdataOutput({})))\n});\nclass CrudAdaptorPluginManager extends BasePluginManager {\n  constructor(pcm, moduleLoader) {\n    super(pcm, moduleLoader);\n  }\n  pluginDef() {\n    return of(new PluginDef({\n      name: 'crud_adaptor'\n    }));\n  }\n  static {\n    this.\u0275fac = function CrudAdaptorPluginManager_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CrudAdaptorPluginManager)(i0.\u0275\u0275inject(i1$1.PluginConfigurationManager), i0.\u0275\u0275inject(i2$1.ModuleLoaderService));\n    };\n  }\n  static {\n    this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n      token: CrudAdaptorPluginManager,\n      factory: CrudAdaptorPluginManager.\u0275fac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(CrudAdaptorPluginManager, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [{\n    type: i1$1.PluginConfigurationManager\n  }, {\n    type: i2$1.ModuleLoaderService\n  }], null);\n})();\nclass CrudDataHelperService {\n  constructor(crud) {\n    this.crud = crud;\n    this.cachedCollectionQueries = [];\n    this.cachedCollectionIgnore = {\n      p: {\n        create: undefined,\n        update: undefined,\n        delete: undefined,\n        query: undefined,\n        read: undefined\n      },\n      input: {\n        identity: undefined\n      }\n    };\n  }\n  evaluatePlugins({\n    object,\n    plugins,\n    op,\n    parentObject\n  }) {\n    const adaptors = Object.keys(plugins);\n    const operations$ = adaptors.filter(a => !plugins[a].ops || plugins[a].ops.includes(op)).map(a => this.crud.getPlugin(plugins[a].plugin ? plugins[a].plugin : a).pipe(map(p => ({\n      p,\n      params: plugins[a].params ? Object.keys(plugins[a].params).reduce((p, name) => ({\n        ...p,\n        [name]: plugins[a].params[name] instanceof Param ? plugins[a].params[name] : new Param({\n          flags: [],\n          mapping: {\n            type: 'static',\n            value: plugins[a].params[name],\n            context: undefined,\n            testValue: plugins[a].params[name]\n          }\n        })\n      }), {}) : {}\n    })), switchMap(({\n      p,\n      params\n    }) => p[op]({\n      rule: undefined,\n      object,\n      parentObject,\n      params,\n      identity: ({\n        object,\n        parentObject\n      }) => of({\n        identity: object.id ? object.id : parentObject ? parentObject.id : undefined\n      })\n    })), switchMap(res => iif(() => plugins[a].plugins && Object.keys(plugins[a].plugins).length !== 0, plugins[a].plugins && Object.keys(plugins[a].plugins).length !== 0 ? this.evaluatePlugins({\n      plugins: plugins[a].plugins,\n      object: res.entity ? res.entity : object,\n      parentObject: res.originalEntity ? res.originalEntity : object,\n      op\n    }) : of(res), of(res)))));\n    return forkJoin(operations$).pipe(map(() => object));\n  }\n  evaluateCollectionPlugins({\n    query,\n    objects,\n    plugins,\n    op,\n    parentObjects\n  }) {\n    console.log('evaluate collection plugins');\n    const adaptors = Object.keys(plugins);\n    const operations$ = adaptors.filter(a => !plugins[a].ops || plugins[a].ops.includes(op)).map(a => this.crud.getPlugin(plugins[a].plugin ? plugins[a].plugin : a).pipe(map(p => ({\n      p,\n      params: plugins[a].params ? Object.keys(plugins[a].params).reduce((p, name) => ({\n        ...p,\n        [name]: plugins[a].params[name] instanceof Param ? plugins[a].params[name] : new Param({\n          flags: [],\n          mapping: {\n            type: 'static',\n            value: plugins[a].params[name],\n            context: undefined,\n            testValue: plugins[a].params[name]\n          }\n        })\n      }), {}) : {}\n    })), switchMap(({\n      p,\n      params\n    }) => this.buildQueryRule({\n      params: query,\n      config: plugins[a]\n    }).pipe(map(({\n      rule\n    }) => ({\n      p,\n      params,\n      rule\n    })))),\n    // tap(({ params, rule }) => console.log('right before collection plugin query', params, rule)),\n    // switchMap(({ p, params, rule }) => p.query({ rule, objects, parentObjects, params, identity: ({ object, parentObject }) => of({ identity: object.id ? object.id : parentObject ? parentObject.id : undefined }) }).pipe(\n    switchMap(({\n      p,\n      params,\n      rule\n    }) => this.flightAndCacheAwareCollectionQuery({\n      p,\n      input: {\n        rule,\n        objects,\n        parentObjects,\n        params,\n        identity: ({\n          object,\n          parentObject\n        }) => of({\n          identity: object.id ? object.id : parentObject ? parentObject.id : undefined\n        })\n      }\n    }).pipe(tap(() => console.log('end of crud query call')))),\n    // tap(res => console.log('right before nested collection plugins', res)),\n    switchMap(res => iif(() => plugins[a].plugins && Object.keys(plugins[a].plugins).length !== 0, this.evaluateCollectionPlugins({\n      query,\n      plugins: plugins[a].plugins && Object.keys(plugins[a].plugins).length !== 0 ? plugins[a].plugins : {},\n      objects: res.entities ? res.entities : objects,\n      parentObjects: res.originalEntities ? res.originalEntities : objects,\n      op\n    }), of(res))), tap(res => console.log('end of op', res))));\n    const fallback = adaptors.filter(a => !plugins[a].ops || plugins[a].ops.includes(op)).find(a => plugins[a].fallback);\n    if (fallback && operations$.length > 1) {\n      return operations$.reduce((p, c) => p.pipe(switchMap(entities => entities && Array.isArray(entities) && entities.length > 0 ? of(entities) : c.pipe(map(c => c && c.entities && Array.isArray(c.entities) ? c.entities : []))), switchMap(entities => entities.length > 0 ? of(entities) : of([]))), of([]));\n    } else {\n      return operations$.length === 1 ? operations$[0].pipe(map(c => [...c.entities])) : forkJoin(operations$).pipe(map(responses => responses.reduce((p, c) => [...p, ...c.entities], [])), defaultIfEmpty([]));\n    }\n  }\n  buildQueryRule({\n    params,\n    config\n  }) {\n    return new Observable(obs => {\n      // const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata as CrudEntityMetadata<any, {}>;\n      const conditions = [];\n      // KISS for now - use qs later - move to reusable function probably inside durl. First lets proof it out with one level.\n      if (typeof params === 'string') {\n        const pieces = params.split('&').map(p => p.split('=', 2)).reduce((p, [name, value]) => new Map([...Array.from(p).filter(([k, _]) => k !== name), [name, [...(p.has(name) ? p.get(name) : []), value]]]), new Map());\n        pieces.forEach((values, name) => conditions.push({\n          any: values.map(value => ({\n            fact: name === 'identity' ? 'identity' : 'entity',\n            operator: config.queryMappings && config.queryMappings.has(name) && config.queryMappings.get(name).defaultOperator ? config.queryMappings.get(name).defaultOperator : 'equal',\n            value,\n            ...(name === 'identity' ? {} : {\n              path: `$.${name}`\n            })\n          }))\n        }));\n      }\n      const rule = conditions.length > 0 ? new jre.Rule({\n        conditions: {\n          all: conditions\n        },\n        event: {\n          type: 'visible'\n        }\n      }) : undefined;\n      obs.next({\n        rule\n      });\n      obs.complete();\n    });\n  }\n  flightAndCacheAwareCollectionQuery(q) {\n    // console.log('flightAndCacheAwareCollectionQuery', q.p, q.input);\n    let matchedIndex = this.cachedCollectionQueries.findIndex(({\n      p,\n      input\n    }) => {\n      const pDiff = rd.getDiff({\n        ...q.p,\n        ...this.cachedCollectionIgnore.p\n      }, {\n        ...p,\n        ...this.cachedCollectionIgnore.p\n      });\n      const iDiff = rd.getDiff({\n        ...q.input,\n        ...this.cachedCollectionIgnore.input\n      }, {\n        ...input,\n        ...this.cachedCollectionIgnore.input\n      });\n      // console.log('pDiff', pDiff);\n      // console.log('iDiff', iDiff);\n      return pDiff.length === 0 && iDiff.length === 0;\n    });\n    if (matchedIndex === -1) {\n      this.cachedCollectionQueries.push({\n        p: q.p,\n        input: q.input,\n        query$: new ReplaySubject()\n      });\n      matchedIndex = this.cachedCollectionQueries.length - 1;\n      q.p.query(q.input).pipe(tap(res => this.cachedCollectionQueries[matchedIndex].query$.next(res)), take(1)).subscribe();\n    }\n    return this.cachedCollectionQueries[matchedIndex].query$.pipe(take(1));\n  }\n  static {\n    this.\u0275fac = function CrudDataHelperService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CrudDataHelperService)(i0.\u0275\u0275inject(CrudAdaptorPluginManager));\n    };\n  }\n  static {\n    this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n      token: CrudDataHelperService,\n      factory: CrudDataHelperService.\u0275fac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(CrudDataHelperService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [{\n    type: CrudAdaptorPluginManager\n  }], null);\n})();\nclass CrudModule {\n  constructor(dpm, cpm, ddpm, paramContextExtractor, attributeSerializer, paramEvaluatorService, crudDataHelper, urlGenerator) {\n    dpm.register(crudAdaptorDatasourcePluginFactory(paramContextExtractor, attributeSerializer, cpm, paramEvaluatorService, crudDataHelper, urlGenerator));\n    ddpm.register(crudDataductPluginFactory({\n      crudDataHelper,\n      attributeSerializer\n    }));\n  }\n  static {\n    this.\u0275fac = function CrudModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CrudModule)(i0.\u0275\u0275inject(i1$2.DatasourcePluginManager), i0.\u0275\u0275inject(CrudAdaptorPluginManager), i0.\u0275\u0275inject(i3$1.DataductPluginManager), i0.\u0275\u0275inject(i4.ParamContextExtractorService), i0.\u0275\u0275inject(i2.AttributeSerializerService), i0.\u0275\u0275inject(i6.ParamEvaluatorService), i0.\u0275\u0275inject(CrudDataHelperService), i0.\u0275\u0275inject(i8.UrlGeneratorService));\n    };\n  }\n  static {\n    this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n      type: CrudModule\n    });\n  }\n  static {\n    this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n      imports: [CommonModule, ReactiveFormsModule, FormsModule, MaterialModule, ContextModule, DparamModule]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(CrudModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [CrudAdaptorDatasourceComponent, CrudAdaptorDatasourceFormComponent],\n      imports: [CommonModule, ReactiveFormsModule, FormsModule, MaterialModule, ContextModule, DparamModule],\n      exports: [CrudAdaptorDatasourceComponent, CrudAdaptorDatasourceFormComponent]\n    }]\n  }], () => [{\n    type: i1$2.DatasourcePluginManager\n  }, {\n    type: CrudAdaptorPluginManager\n  }, {\n    type: i3$1.DataductPluginManager\n  }, {\n    type: i4.ParamContextExtractorService\n  }, {\n    type: i2.AttributeSerializerService\n  }, {\n    type: i6.ParamEvaluatorService\n  }, {\n    type: CrudDataHelperService\n  }, {\n    type: i8.UrlGeneratorService\n  }], null);\n})();\nconst blankCrudAdaptorResponse = {\n  success: false\n};\n\n// import qs from 'qs'\nclass CrudDataService {\n  get name() {\n    return this._name;\n  }\n  constructor(entityName, crud, entityDefinitionService, crudDataHelperService) {\n    this.crud = crud;\n    this.entityDefinitionService = entityDefinitionService;\n    this.crudDataHelperService = crudDataHelperService;\n    this._name = `${entityName} CrudDataService`;\n    this.entityName = entityName;\n  }\n  add(object) {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluatePlugins({\n      object,\n      plugins: metadata.crud,\n      op: 'create'\n    });\n  }\n  update(update) {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluatePlugins({\n      object: update.changes,\n      plugins: metadata.crud,\n      op: 'update'\n    });\n  }\n  upsert(object) {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluatePlugins({\n      object,\n      plugins: metadata.crud,\n      op: 'update'\n    }); // just alias of update for now.\n  }\n  delete(id) {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.getById(id).pipe(switchMap(object => this.crudDataHelperService.evaluatePlugins({\n      object,\n      plugins: metadata.crud,\n      op: 'delete'\n    })), map(() => id));\n  }\n  getAll() {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluateCollectionPlugins({\n      plugins: metadata.crud,\n      op: 'query'\n    });\n  }\n  getById(id) {\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluateCollectionPlugins({\n      query: `identity=${id}`,\n      plugins: metadata.crud,\n      op: 'query'\n    }).pipe(map(objects => objects && objects.length !== 0 ? objects[0] : undefined));\n  }\n  getWithQuery(params) {\n    // @todo: convert to rules. - eq support possibly nesting... - _root. -- where root will be the item/object\n    /*const flat: Array<T> = [];\n    this.entities.forEach(v => {\n      flat.push(v);\n    });\n    return of(flat);*/\n    const metadata = this.entityDefinitionService.getDefinition(this.entityName).metadata;\n    return this.crudDataHelperService.evaluateCollectionPlugins({\n      query: params,\n      plugins: metadata.crud,\n      op: 'query'\n    });\n  }\n}\n\n/*\n * Public API Surface of crud\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CrudAdaptorDatasource, CrudAdaptorDatasourceComponent, CrudAdaptorDatasourceFormComponent, CrudAdaptorPlugin, CrudAdaptorPluginManager, CrudDataHelperService, CrudDataService, CrudModule, blankCrudAdaptorResponse };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,oBAAoB;AAC7B,YAAY,QAAQ;AACpB,SAAS,YAAY,OAAO,WAAW,YAAY,gBAAgB;AACnE,YAAY,QAAQ;AACpB,SAAS,mBAAmB,eAAe,qBAAqB,mBAAmB;AACnF,YAAY,QAAQ;AACpB,SAAS,qBAAqB;AAC9B,YAAY,QAAQ;AACpB,SAAS,OAAO,oBAAoB;AACpC,SAAS,sBAAsB;AAG/B,gBAAe;AADf,SAAS,KAAK,KAAK,QAAQ,OAAO,cAAc,WAAW,MAAM,sBAAsB;AAEvF,YAAY,UAAU;AACtB,SAAS,QAAQ,mBAAmB,iBAAiB;AACrD,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,YAAY,UAAU;AACtB,SAAS,kBAAkB,yBAAyB,eAAe;AACnE,YAAY,UAAU;AACtB,SAAS,gBAAgB,sBAAsB;AAE/C,YAAY,UAAU;AACtB,YAAY,SAAS;AACrB,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,IAAM,oBAAN,cAAgC,OAAO;AAAA,EACrC,YAAY,MAAM;AAChB,UAAM,IAAI;AACV,QAAI,MAAM;AACR,WAAK,SAAS,KAAK;AACnB,WAAK,OAAO,KAAK;AACjB,WAAK,SAAS,KAAK;AACnB,WAAK,SAAS,KAAK;AACnB,UAAI,KAAK,OAAO;AACd,aAAK,QAAQ,KAAK;AAAA,MACpB;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAM,wBAAN,MAA4B;AAAA,EAC1B,YAAY,MAAM;AAChB,SAAK,UAAU,CAAC;AAChB,SAAK,SAAS,CAAC;AACf,QAAI,MAAM;AACR,WAAK,cAAc,KAAK;AACxB,WAAK,gBAAgB,KAAK,gBAAgB,KAAK,gBAAgB;AAC/D,WAAK,eAAe,KAAK,eAAe,KAAK,eAAe;AAC5D,UAAI,KAAK,WAAW,MAAM,QAAQ,KAAK,OAAO,GAAG;AAC/C,aAAK,UAAU,KAAK,QAAQ,IAAI,OAAK,IAAI,MAAM,CAAC,CAAC;AAAA,MACnD;AACA,UAAI,KAAK,UAAU,MAAM,QAAQ,KAAK,MAAM,GAAG;AAC7C,aAAK,SAAS,KAAK,OAAO,IAAI,OAAK,IAAI,MAAM,CAAC,CAAC;AAAA,MACjD;AAAA,IACF;AAAA,EACF;AACF;AACA,IAAM,qCAAN,MAAM,oCAAmC;AAAA,EACvC,IAAI,SAAS,UAAU;AACrB,SAAK,UAAU,KAAK,QAAQ;AAAA,EAC9B;AAAA,EACA,YAAY,IAAI,qBAAqB;AACnC,SAAK,KAAK;AACV,SAAK,sBAAsB;AAC3B,SAAK,WAAW,CAAC;AACjB,SAAK,YAAY,IAAI,gBAAgB,MAAS;AAC9C,SAAK,cAAc,IAAI,gBAAgB,MAAS;AAChD,SAAK,gBAAgB,IAAI,gBAAgB,CAAC,CAAC;AAC3C,SAAK,eAAe,IAAI,gBAAgB,CAAC,CAAC;AAC1C,SAAK,YAAY,KAAK,GAAG,MAAM;AAAA,MAC7B,aAAa,KAAK,GAAG,QAAQ,EAAE;AAAA,MAC/B,eAAe,KAAK,GAAG,QAAQ,EAAE;AAAA,MACjC,cAAc,KAAK,GAAG,QAAQ,EAAE;AAAA,MAChC,SAAS,KAAK,GAAG,QAAQ,CAAC,CAAC;AAAA,MAC3B,QAAQ,KAAK,GAAG,QAAQ,CAAC,CAAC;AAAA,IAC5B,CAAC;AACD,SAAK,cAAc,KAAK,UAAU,KAAK,IAAI,OAAK,IAAI,IAAI,sBAAsB,KAAK,oBAAoB,oBAAoB,CAAC,CAAC,IAAI,MAAS,GAAG,IAAI,QAAM,WAAW,MAAM,KAAK,YAAY,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,UAAU,QAAM;AACnN,UAAI,IAAI;AACN,aAAK,UAAU,IAAI,aAAa,EAAE,SAAS,GAAG,WAAW;AACzD,aAAK,UAAU,IAAI,eAAe,EAAE,SAAS,GAAG,gBAAgB,GAAG,gBAAgB,EAAE;AACrF,aAAK,UAAU,IAAI,cAAc,EAAE,SAAS,GAAG,eAAe,GAAG,eAAe,EAAE;AAAA,MACpF,OAAO;AACL,aAAK,UAAU,IAAI,aAAa,EAAE,SAAS,EAAE;AAC7C,aAAK,UAAU,IAAI,eAAe,EAAE,SAAS,EAAE;AAC/C,aAAK,UAAU,IAAI,cAAc,EAAE,SAAS,EAAE;AAC9C,mBAAW,MAAM,KAAK,cAAc,KAAK,CAAC,CAAC,GAAG,CAAC;AAC/C,mBAAW,MAAM,KAAK,cAAc,KAAK,CAAC,CAAC,GAAG,CAAC;AAAA,MACjD;AAAA,IACF,CAAC;AACD,SAAK,uBAAuB,cAAc,CAAC,KAAK,aAAa,KAAK,UAAU,IAAI,eAAe,EAAE,YAAY,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC,EAAE,MAAM,OAAO,MAAS,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,KAAK,cAAc,KAAK,GAAG,OAAO,CAAC,CAAC,EAAE,UAAU;AACjO,SAAK,sBAAsB,cAAc,CAAC,KAAK,aAAa,KAAK,UAAU,IAAI,cAAc,EAAE,YAAY,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC,EAAE,MAAM,OAAO,MAAS,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,KAAK,aAAa,KAAK,GAAG,MAAM,CAAC,CAAC,EAAE,UAAU;AAC7N,SAAK,yBAAyB,KAAK,UAAU,IAAI,eAAe,EAAE,aAAa,KAAK,aAAa,GAAG,CAAC,EAAE,UAAU,mBAAiB;AAChI,YAAM,SAAS,UAAAA,QAAG,MAAM,MAAM,aAAa;AAC3C,WAAK,gBAAgB;AAAA,IACvB,CAAC;AACD,SAAK,wBAAwB,KAAK,UAAU,IAAI,cAAc,EAAE,aAAa,KAAK,aAAa,GAAG,CAAC,EAAE,UAAU,kBAAgB;AAC7H,YAAM,SAAS,UAAAA,QAAG,MAAM,MAAM,YAAY;AAC1C,WAAK,eAAe;AAAA,IACtB,CAAC;AACD,SAAK,YAAY,MAAM;AAAA,IAAC;AAAA,EAC1B;AAAA,EACA,WAAW;AAAA,EAAC;AAAA,EACZ,WAAW,KAAK;AACd,QAAI,KAAK;AACP,WAAK,UAAU,SAAS,KAAK;AAAA,QAC3B,WAAW;AAAA,MACb,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EACA,iBAAiB,IAAI;AACnB,SAAK,UAAU,aAAa,UAAU,EAAE;AAAA,EAC1C;AAAA,EACA,kBAAkB,IAAI;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EACA,iBAAiB,YAAY;AAC3B,QAAI,YAAY;AACd,WAAK,UAAU,QAAQ;AAAA,IACzB,OAAO;AACL,WAAK,UAAU,OAAO;AAAA,IACxB;AAAA,EACF;AAAA,EACA,SAAS,GAAG;AACV,WAAO,KAAK,UAAU,QAAQ,OAAO,KAAK,UAAU;AAAA,EACtD;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,2CAA2C,mBAAmB;AACjF,aAAO,KAAK,qBAAqB,qCAAuC,+BAAqB,qBAAkB,GAAM,+BAAqB,6BAA0B,CAAC;AAAA,IACvK;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,+BAAkB;AAAA,MAC9C,MAAM;AAAA,MACN,WAAW,CAAC,CAAC,6CAA6C,CAAC;AAAA,MAC3D,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,MACZ;AAAA,MACA,YAAY;AAAA,MACZ,UAAU,CAAI,gCAAmB,CAAC;AAAA,QAChC,SAAS;AAAA,QACT,aAAa,WAAW,MAAM,mCAAkC;AAAA,QAChE,OAAO;AAAA,MACT,GAAG;AAAA,QACD,SAAS;AAAA,QACT,aAAa,WAAW,MAAM,mCAAkC;AAAA,QAChE,OAAO;AAAA,MACT,CAAC,CAAC,CAAC;AAAA,MACH,OAAO;AAAA,MACP,MAAM;AAAA,MACN,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,CAAC,YAAY,IAAI,eAAe,WAAW,mBAAmB,eAAe,YAAY,EAAE,GAAG,CAAC,GAAG,mBAAmB,GAAG,CAAC,YAAY,IAAI,eAAe,WAAW,mBAAmB,eAAe,GAAG,CAAC,mBAAmB,WAAW,GAAG,UAAU,eAAe,UAAU,GAAG,CAAC,GAAG,kBAAkB,GAAG,CAAC,YAAY,IAAI,eAAe,UAAU,mBAAmB,cAAc,GAAG,CAAC,mBAAmB,UAAU,GAAG,UAAU,eAAe,UAAU,CAAC;AAAA,MACvd,UAAU,SAAS,4CAA4C,IAAI,KAAK;AACtE,YAAI,KAAK,GAAG;AACV,UAAG,4BAAe,GAAG,OAAO,CAAC,EAAE,GAAG,KAAK,EAAE,GAAG,gBAAgB;AAC5D,UAAG,uBAAU,GAAG,SAAS,CAAC;AAC1B,UAAG,0BAAa,EAAE;AAClB,UAAG,4BAAe,GAAG,OAAO,CAAC,EAAE,GAAG,KAAK,EAAE,GAAG,gBAAgB;AAC5D,UAAG,uBAAU,GAAG,SAAS,CAAC;AAC1B,UAAG,0BAAa,EAAE;AAClB,UAAG,uBAAU,GAAG,8BAA8B,CAAC;AAC/C,UAAG,0BAAa;AAChB,UAAG,4BAAe,GAAG,OAAO,CAAC,EAAE,IAAI,KAAK,EAAE,IAAI,gBAAgB;AAC9D,UAAG,uBAAU,IAAI,SAAS,CAAC;AAC3B,UAAG,0BAAa,EAAE;AAClB,UAAG,uBAAU,IAAI,8BAA8B,CAAC;AAChD,UAAG,0BAAa,EAAE;AAAA,QACpB;AACA,YAAI,KAAK,GAAG;AACV,UAAG,wBAAW,aAAa,IAAI,SAAS;AACxC,UAAG,uBAAU,CAAC;AACd,UAAG,wBAAW,UAAU,IAAI,aAAa,EAAE,eAAe,IAAI,cAAc,KAAK,EAAE,YAAY,IAAI,QAAQ;AAC3G,UAAG,uBAAU,CAAC;AACd,UAAG,wBAAW,UAAU,IAAI,YAAY,EAAE,eAAe,IAAI,aAAa,KAAK,EAAE,YAAY,IAAI,QAAQ;AAAA,QAC3G;AAAA,MACF;AAAA,MACA,cAAc,CAAI,yBAAyB,oBAAoB,yBAAyB,sBAAsB,uBAAuB,oBAAoB,aAAa,iBAAiB,sBAAmB;AAAA,MAC1M,eAAe;AAAA,IACjB,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,oCAAoC,CAAC;AAAA,IAC3G,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,UAAU;AAAA,MACV,WAAW,CAAC;AAAA,QACV,SAAS;AAAA,QACT,aAAa,WAAW,MAAM,kCAAkC;AAAA,QAChE,OAAO;AAAA,MACT,GAAG;AAAA,QACD,SAAS;AAAA,QACT,aAAa,WAAW,MAAM,kCAAkC;AAAA,QAChE,OAAO;AAAA,MACT,CAAC;AAAA,MACD,YAAY;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,CAAC,GAAG;AAAA,IACF,UAAU,CAAC;AAAA,MACT,MAAM;AAAA,IACR,CAAC;AAAA,IACD,UAAU,CAAC;AAAA,MACT,MAAM;AAAA,IACR,CAAC;AAAA,EACH,CAAC;AACH,GAAG;AACH,IAAM,iCAAN,MAAM,gCAA+B;AAAA,EACnC,YAAY,kBAAkB;AAC5B,SAAK,mBAAmB;AACxB,SAAK,WAAW,CAAC;AACjB,SAAK,WAAW,CAAC;AAAA,EACnB;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,uCAAuC,mBAAmB;AAC7E,aAAO,KAAK,qBAAqB,iCAAmC,+BAAqB,mBAAgB,CAAC;AAAA,IAC5G;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,+BAAkB;AAAA,MAC9C,MAAM;AAAA,MACN,WAAW,CAAC,CAAC,wCAAwC,CAAC;AAAA,MACtD,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,MACZ;AAAA,MACA,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,MAAM;AAAA,MACN,QAAQ,CAAC,CAAC,GAAG,WAAW,GAAG,CAAC,mBAAmB,YAAY,GAAG,YAAY,UAAU,CAAC;AAAA,MACrF,UAAU,SAAS,wCAAwC,IAAI,KAAK;AAClE,YAAI,KAAK,GAAG;AACV,UAAG,qCAAwB,GAAG,CAAC;AAC/B,UAAG,uBAAU,GAAG,+CAA+C,CAAC;AAChE,UAAG,mCAAsB;AAAA,QAC3B;AACA,YAAI,KAAK,GAAG;AACV,UAAG,wBAAW,aAAa,IAAI,iBAAiB,OAAO;AACvD,UAAG,uBAAU;AACb,UAAG,wBAAW,YAAY,IAAI,QAAQ,EAAE,YAAY,IAAI,QAAQ;AAAA,QAClE;AAAA,MACF;AAAA,MACA,cAAc,CAAI,oBAAoB,yBAAyB,uBAAuB,oBAAiB,kCAAkC;AAAA,MACzI,eAAe;AAAA,IACjB,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,gCAAgC,CAAC;AAAA,IACvG,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA,MACV,YAAY;AAAA,IACd,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAS;AAAA,EACX,CAAC,GAAG;AAAA,IACF,UAAU,CAAC;AAAA,MACT,MAAM;AAAA,IACR,CAAC;AAAA,IACD,UAAU,CAAC;AAAA,MACT,MAAM;AAAA,IACR,CAAC;AAAA,EACH,CAAC;AACH,GAAG;AAGH,IAAM,qCAAqC,CAAC,uBAAuB,qBAAqB,KAAK,uBAAuB,gBAAgB,iBAAiB;AACnJ,SAAO,IAAI,iBAAiB;AAAA,IAC1B,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO,CAAC;AAAA,MACN;AAAA,MACA;AAAA,IACF,MAAM,GAAG,IAAI,QAAQ,CAAC,EAAE,KAAK,IAAI,MAAM,oBAAoB,oBAAoB,QAAQ,CAAC,GAAG,IAAI,OAAK,IAAI,sBAAsB,CAAC,CAAC,GAAG,UAAU,QAAM,IAAI,UAAU,GAAG,WAAW,EAAE,KAAK,IAAI,aAAW;AAAA,MACnM;AAAA,MACA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;AAAA,MACV;AAAA,MACA;AAAA,IACF,OAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA,aAAa,GAAG,gBAAgB,GAAG,cAAc,MAAM,GAAG,EAAE,OAAO,OAAK,EAAE,QAAQ,IAAI,MAAM,EAAE,EAAE,IAAI,OAAK,EAAE,MAAM,KAAK,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC;AAAA,IAC5I,EAAE,GAAG,UAAU,CAAC;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,SAAS,CAAC,sBAAsB,YAAY,GAAG,QAAQ,OAAO,CAAC,GAAG,GAAG,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,oBAAI,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,YAAU,MAAM,KAAK,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,MAAO,iCAC3L,IAD2L;AAAA,MAE9L,CAAC,CAAC,GAAG;AAAA,IACP,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,gBAAgB,GAAG,iBAAiB,KAAK,aAAa,OAAO,MAAM,GAAG,cAAc,GAAG,QAAQ,QAAQ,EAAE,KAAK,KAAK,CAAC,CAAC,IAAI,GAAG,MAAS,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,CAAC,SAAS,KAAK,OAAO;AAAA,MACrL;AAAA,MACA;AAAA,MACA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,eAAe,0BAA0B;AAAA,MAC7C,SAAS;AAAA,QACP,CAAC,OAAO,EAAE,GAAG;AAAA,UACX,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,MACA,IAAI;AAAA,MACJ,OAAO,QAAQ,MAAM,OAAO,CAAC,IAAI;AAAA,IACnC,CAAC,CAAC,GAAG,IAAI,aAAW,IAAI,QAAQ;AAAA,MAC9B;AAAA,IACF,CAAC,CAAC,CAAC;AAAA,IACH,eAAe,MAAM,GAAG,IAAI,wBAAwB;AAAA,MAClD,YAAY;AAAA,IACd,CAAC,CAAC;AAAA,IACF,aAAa,CAAC;AAAA,MACZ;AAAA,MACA;AAAA,IACF,MAAM,GAAG,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,CAAC;AACH;AACA,IAAM,4BAA4B,CAAC;AAAA,EACjC;AAAA,EACA;AACF,MAAM,IAAI,eAAe;AAAA,EACvB,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,MAAM,WAAS,GAAG,IAAI,eAAe,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,OAAO;AAAA,IACxD,UAAU,oBAAoB,oBAAoB,MAAM,QAAQ;AAAA,EAClE,EAAE,GAAG,IAAI,CAAC;AAAA,IACR;AAAA,EACF,MAAM,QAAQ,IAAI,kBAAkB,QAAQ,CAAC,GAAG,IAAI,CAAC;AAAA,IACnD;AAAA,EACF,OAAO;AAAA,IACL,SAAS;AAAA,MACP,CAAC,GAAG,SAAS,WAAW,EAAE,GAAG;AAAA,QAC3B,QAAQ,GAAG,SAAS,WAAW;AAAA,QAC/B,KAAK,CAAC,QAAQ;AAAA,QACd,QAAQ,GAAG,SAAS,aAAa,GAAG,MAAM,GAAG,EAAE,OAAO,CAAC,GAAG,GAAG,MAAO,iCAC/D,IAD+D;AAAA,UAElE,CAAC,EAAE,MAAM,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,MAAM,SAAS,QAAQ,CAAC,CAAC;AAAA,QACrD,IAAI,CAAC,CAAC;AAAA,MACR;AAAA,IACF;AAAA,EACF,EAAE,GAAG,UAAU,CAAC;AAAA,IACd;AAAA,EACF,MAAM,eAAe,gBAAgB;AAAA,IACnC,QAAQ,MAAM;AAAA,IACd;AAAA,IACA,IAAI;AAAA,IACJ,cAAc;AAAA,MACZ,IAAS,WAAG;AAAA,IACd;AAAA,EACF,CAAC,CAAC,GAAG,IAAI,MAAM,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC;AACxC,CAAC;AACD,IAAM,2BAAN,MAAM,kCAAiC,kBAAkB;AAAA,EACvD,YAAY,KAAK,cAAc;AAC7B,UAAM,KAAK,YAAY;AAAA,EACzB;AAAA,EACA,YAAY;AACV,WAAO,GAAG,IAAI,UAAU;AAAA,MACtB,MAAM;AAAA,IACR,CAAC,CAAC;AAAA,EACJ;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,iCAAiC,mBAAmB;AACvE,aAAO,KAAK,qBAAqB,2BAA6B,sBAAc,+BAA0B,GAAM,sBAAc,wBAAmB,CAAC;AAAA,IAChJ;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,aAAuB,gBAAG,gCAAmB;AAAA,MAChD,OAAO;AAAA,MACP,SAAS,0BAAyB;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,0BAA0B,CAAC;AAAA,IACjG,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,YAAY;AAAA,IACd,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAW;AAAA,EACb,GAAG;AAAA,IACD,MAAW;AAAA,EACb,CAAC,GAAG,IAAI;AACV,GAAG;AACH,IAAM,wBAAN,MAAM,uBAAsB;AAAA,EAC1B,YAAY,MAAM;AAChB,SAAK,OAAO;AACZ,SAAK,0BAA0B,CAAC;AAChC,SAAK,yBAAyB;AAAA,MAC5B,GAAG;AAAA,QACD,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,MAAM;AAAA,MACR;AAAA,MACA,OAAO;AAAA,QACL,UAAU;AAAA,MACZ;AAAA,IACF;AAAA,EACF;AAAA,EACA,gBAAgB;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG;AACD,UAAM,WAAW,OAAO,KAAK,OAAO;AACpC,UAAM,cAAc,SAAS,OAAO,OAAK,CAAC,QAAQ,CAAC,EAAE,OAAO,QAAQ,CAAC,EAAE,IAAI,SAAS,EAAE,CAAC,EAAE,IAAI,OAAK,KAAK,KAAK,UAAU,QAAQ,CAAC,EAAE,SAAS,QAAQ,CAAC,EAAE,SAAS,CAAC,EAAE,KAAK,IAAI,QAAM;AAAA,MAC9K;AAAA,MACA,QAAQ,QAAQ,CAAC,EAAE,SAAS,OAAO,KAAK,QAAQ,CAAC,EAAE,MAAM,EAAE,OAAO,CAACC,IAAG,SAAU,iCAC3EA,KAD2E;AAAA,QAE9E,CAAC,IAAI,GAAG,QAAQ,CAAC,EAAE,OAAO,IAAI,aAAa,QAAQ,QAAQ,CAAC,EAAE,OAAO,IAAI,IAAI,IAAI,MAAM;AAAA,UACrF,OAAO,CAAC;AAAA,UACR,SAAS;AAAA,YACP,MAAM;AAAA,YACN,OAAO,QAAQ,CAAC,EAAE,OAAO,IAAI;AAAA,YAC7B,SAAS;AAAA,YACT,WAAW,QAAQ,CAAC,EAAE,OAAO,IAAI;AAAA,UACnC;AAAA,QACF,CAAC;AAAA,MACH,IAAI,CAAC,CAAC,IAAI,CAAC;AAAA,IACb,EAAE,GAAG,UAAU,CAAC;AAAA,MACd;AAAA,MACA;AAAA,IACF,MAAM,EAAE,EAAE,EAAE;AAAA,MACV,MAAM;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,UAAU,CAAC;AAAA,QACT,QAAAC;AAAA,QACA,cAAAC;AAAA,MACF,MAAM,GAAG;AAAA,QACP,UAAUD,QAAO,KAAKA,QAAO,KAAKC,gBAAeA,cAAa,KAAK;AAAA,MACrE,CAAC;AAAA,IACH,CAAC,CAAC,GAAG,UAAU,SAAO,IAAI,MAAM,QAAQ,CAAC,EAAE,WAAW,OAAO,KAAK,QAAQ,CAAC,EAAE,OAAO,EAAE,WAAW,GAAG,QAAQ,CAAC,EAAE,WAAW,OAAO,KAAK,QAAQ,CAAC,EAAE,OAAO,EAAE,WAAW,IAAI,KAAK,gBAAgB;AAAA,MAC5L,SAAS,QAAQ,CAAC,EAAE;AAAA,MACpB,QAAQ,IAAI,SAAS,IAAI,SAAS;AAAA,MAClC,cAAc,IAAI,iBAAiB,IAAI,iBAAiB;AAAA,MACxD;AAAA,IACF,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACxB,WAAO,SAAS,WAAW,EAAE,KAAK,IAAI,MAAM,MAAM,CAAC;AAAA,EACrD;AAAA,EACA,0BAA0B;AAAA,IACxB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG;AACD,YAAQ,IAAI,6BAA6B;AACzC,UAAM,WAAW,OAAO,KAAK,OAAO;AACpC,UAAM,cAAc,SAAS,OAAO,OAAK,CAAC,QAAQ,CAAC,EAAE,OAAO,QAAQ,CAAC,EAAE,IAAI,SAAS,EAAE,CAAC,EAAE,IAAI,OAAK,KAAK,KAAK,UAAU,QAAQ,CAAC,EAAE,SAAS,QAAQ,CAAC,EAAE,SAAS,CAAC,EAAE;AAAA,MAAK,IAAI,QAAM;AAAA,QAC9K;AAAA,QACA,QAAQ,QAAQ,CAAC,EAAE,SAAS,OAAO,KAAK,QAAQ,CAAC,EAAE,MAAM,EAAE,OAAO,CAACF,IAAG,SAAU,iCAC3EA,KAD2E;AAAA,UAE9E,CAAC,IAAI,GAAG,QAAQ,CAAC,EAAE,OAAO,IAAI,aAAa,QAAQ,QAAQ,CAAC,EAAE,OAAO,IAAI,IAAI,IAAI,MAAM;AAAA,YACrF,OAAO,CAAC;AAAA,YACR,SAAS;AAAA,cACP,MAAM;AAAA,cACN,OAAO,QAAQ,CAAC,EAAE,OAAO,IAAI;AAAA,cAC7B,SAAS;AAAA,cACT,WAAW,QAAQ,CAAC,EAAE,OAAO,IAAI;AAAA,YACnC;AAAA,UACF,CAAC;AAAA,QACH,IAAI,CAAC,CAAC,IAAI,CAAC;AAAA,MACb,EAAE;AAAA,MAAG,UAAU,CAAC;AAAA,QACd;AAAA,QACA;AAAA,MACF,MAAM,KAAK,eAAe;AAAA,QACxB,QAAQ;AAAA,QACR,QAAQ,QAAQ,CAAC;AAAA,MACnB,CAAC,EAAE,KAAK,IAAI,CAAC;AAAA,QACX;AAAA,MACF,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,MACF,EAAE,CAAC,CAAC;AAAA;AAAA;AAAA,MAGJ,UAAU,CAAC;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,MACF,MAAM,KAAK,mCAAmC;AAAA,QAC5C;AAAA,QACA,OAAO;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA,UAAU,CAAC;AAAA,YACT;AAAA,YACA;AAAA,UACF,MAAM,GAAG;AAAA,YACP,UAAU,OAAO,KAAK,OAAO,KAAK,eAAe,aAAa,KAAK;AAAA,UACrE,CAAC;AAAA,QACH;AAAA,MACF,CAAC,EAAE,KAAK,IAAI,MAAM,QAAQ,IAAI,wBAAwB,CAAC,CAAC,CAAC;AAAA;AAAA,MAEzD,UAAU,SAAO,IAAI,MAAM,QAAQ,CAAC,EAAE,WAAW,OAAO,KAAK,QAAQ,CAAC,EAAE,OAAO,EAAE,WAAW,GAAG,KAAK,0BAA0B;AAAA,QAC5H;AAAA,QACA,SAAS,QAAQ,CAAC,EAAE,WAAW,OAAO,KAAK,QAAQ,CAAC,EAAE,OAAO,EAAE,WAAW,IAAI,QAAQ,CAAC,EAAE,UAAU,CAAC;AAAA,QACpG,SAAS,IAAI,WAAW,IAAI,WAAW;AAAA,QACvC,eAAe,IAAI,mBAAmB,IAAI,mBAAmB;AAAA,QAC7D;AAAA,MACF,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAAA,MAAG,IAAI,SAAO,QAAQ,IAAI,aAAa,GAAG,CAAC;AAAA,IAAC,CAAC;AACzD,UAAM,WAAW,SAAS,OAAO,OAAK,CAAC,QAAQ,CAAC,EAAE,OAAO,QAAQ,CAAC,EAAE,IAAI,SAAS,EAAE,CAAC,EAAE,KAAK,OAAK,QAAQ,CAAC,EAAE,QAAQ;AACnH,QAAI,YAAY,YAAY,SAAS,GAAG;AACtC,aAAO,YAAY,OAAO,CAAC,GAAG,MAAM,EAAE,KAAK,UAAU,cAAY,YAAY,MAAM,QAAQ,QAAQ,KAAK,SAAS,SAAS,IAAI,GAAG,QAAQ,IAAI,EAAE,KAAK,IAAI,CAAAG,OAAKA,MAAKA,GAAE,YAAY,MAAM,QAAQA,GAAE,QAAQ,IAAIA,GAAE,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,cAAY,SAAS,SAAS,IAAI,GAAG,QAAQ,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAAA,IAC7S,OAAO;AACL,aAAO,YAAY,WAAW,IAAI,YAAY,CAAC,EAAE,KAAK,IAAI,OAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,IAAI,SAAS,WAAW,EAAE,KAAK,IAAI,eAAa,UAAU,OAAO,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,EAAE,QAAQ,GAAG,CAAC,CAAC,CAAC,GAAG,eAAe,CAAC,CAAC,CAAC;AAAA,IAC3M;AAAA,EACF;AAAA,EACA,eAAe;AAAA,IACb;AAAA,IACA;AAAA,EACF,GAAG;AACD,WAAO,IAAI,WAAW,SAAO;AAE3B,YAAM,aAAa,CAAC;AAEpB,UAAI,OAAO,WAAW,UAAU;AAC9B,cAAM,SAAS,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK,EAAE,MAAM,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,KAAK,MAAM,IAAI,IAAI,CAAC,GAAG,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,MAAM,IAAI,GAAG,CAAC,MAAM,CAAC,GAAI,EAAE,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,GAAI,KAAK,CAAC,CAAC,CAAC,GAAG,oBAAI,IAAI,CAAC;AACnN,eAAO,QAAQ,CAAC,QAAQ,SAAS,WAAW,KAAK;AAAA,UAC/C,KAAK,OAAO,IAAI,WAAU;AAAA,YACxB,MAAM,SAAS,aAAa,aAAa;AAAA,YACzC,UAAU,OAAO,iBAAiB,OAAO,cAAc,IAAI,IAAI,KAAK,OAAO,cAAc,IAAI,IAAI,EAAE,kBAAkB,OAAO,cAAc,IAAI,IAAI,EAAE,kBAAkB;AAAA,YACtK;AAAA,aACI,SAAS,aAAa,CAAC,IAAI;AAAA,YAC7B,MAAM,KAAK,IAAI;AAAA,UACjB,EACA;AAAA,QACJ,CAAC,CAAC;AAAA,MACJ;AACA,YAAM,OAAO,WAAW,SAAS,IAAI,IAAQ,SAAK;AAAA,QAChD,YAAY;AAAA,UACV,KAAK;AAAA,QACP;AAAA,QACA,OAAO;AAAA,UACL,MAAM;AAAA,QACR;AAAA,MACF,CAAC,IAAI;AACL,UAAI,KAAK;AAAA,QACP;AAAA,MACF,CAAC;AACD,UAAI,SAAS;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EACA,mCAAmC,GAAG;AAEpC,QAAI,eAAe,KAAK,wBAAwB,UAAU,CAAC;AAAA,MACzD;AAAA,MACA;AAAA,IACF,MAAM;AACJ,YAAM,QAAW,WAAQ,kCACpB,EAAE,IACF,KAAK,uBAAuB,IAC9B,kCACE,IACA,KAAK,uBAAuB,EAChC;AACD,YAAM,QAAW,WAAQ,kCACpB,EAAE,QACF,KAAK,uBAAuB,QAC9B,kCACE,QACA,KAAK,uBAAuB,MAChC;AAGD,aAAO,MAAM,WAAW,KAAK,MAAM,WAAW;AAAA,IAChD,CAAC;AACD,QAAI,iBAAiB,IAAI;AACvB,WAAK,wBAAwB,KAAK;AAAA,QAChC,GAAG,EAAE;AAAA,QACL,OAAO,EAAE;AAAA,QACT,QAAQ,IAAI,cAAc;AAAA,MAC5B,CAAC;AACD,qBAAe,KAAK,wBAAwB,SAAS;AACrD,QAAE,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,IAAI,SAAO,KAAK,wBAAwB,YAAY,EAAE,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,EAAE,UAAU;AAAA,IACtH;AACA,WAAO,KAAK,wBAAwB,YAAY,EAAE,OAAO,KAAK,KAAK,CAAC,CAAC;AAAA,EACvE;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,8BAA8B,mBAAmB;AACpE,aAAO,KAAK,qBAAqB,wBAA0B,sBAAS,wBAAwB,CAAC;AAAA,IAC/F;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,aAAuB,gBAAG,gCAAmB;AAAA,MAChD,OAAO;AAAA,MACP,SAAS,uBAAsB;AAAA,MAC/B,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,uBAAuB,CAAC;AAAA,IAC9F,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,YAAY;AAAA,IACd,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAM;AAAA,EACR,CAAC,GAAG,IAAI;AACV,GAAG;AACH,IAAM,aAAN,MAAM,YAAW;AAAA,EACf,YAAY,KAAK,KAAK,MAAM,uBAAuB,qBAAqB,uBAAuB,gBAAgB,cAAc;AAC3H,QAAI,SAAS,mCAAmC,uBAAuB,qBAAqB,KAAK,uBAAuB,gBAAgB,YAAY,CAAC;AACrJ,SAAK,SAAS,0BAA0B;AAAA,MACtC;AAAA,MACA;AAAA,IACF,CAAC,CAAC;AAAA,EACJ;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,mBAAmB,mBAAmB;AACzD,aAAO,KAAK,qBAAqB,aAAe,sBAAc,4BAAuB,GAAM,sBAAS,wBAAwB,GAAM,sBAAc,0BAAqB,GAAM,sBAAY,+BAA4B,GAAM,sBAAY,6BAA0B,GAAM,sBAAY,wBAAqB,GAAM,sBAAS,qBAAqB,GAAM,sBAAY,sBAAmB,CAAC;AAAA,IAClX;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,8BAAiB;AAAA,MAC7C,MAAM;AAAA,IACR,CAAC;AAAA,EACH;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,8BAAiB;AAAA,MAC7C,SAAS,CAAC,cAAc,qBAAqB,aAAa,gBAAgB,eAAe,YAAY;AAAA,IACvG,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,YAAY,CAAC;AAAA,IACnF,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,cAAc,CAAC,gCAAgC,kCAAkC;AAAA,MACjF,SAAS,CAAC,cAAc,qBAAqB,aAAa,gBAAgB,eAAe,YAAY;AAAA,MACrG,SAAS,CAAC,gCAAgC,kCAAkC;AAAA,IAC9E,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAW;AAAA,EACb,GAAG;AAAA,IACD,MAAM;AAAA,EACR,GAAG;AAAA,IACD,MAAW;AAAA,EACb,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAM;AAAA,EACR,GAAG;AAAA,IACD,MAAS;AAAA,EACX,CAAC,GAAG,IAAI;AACV,GAAG;AACH,IAAM,2BAA2B;AAAA,EAC/B,SAAS;AACX;AAGA,IAAM,kBAAN,MAAsB;AAAA,EACpB,IAAI,OAAO;AACT,WAAO,KAAK;AAAA,EACd;AAAA,EACA,YAAY,YAAY,MAAM,yBAAyB,uBAAuB;AAC5E,SAAK,OAAO;AACZ,SAAK,0BAA0B;AAC/B,SAAK,wBAAwB;AAC7B,SAAK,QAAQ,GAAG,UAAU;AAC1B,SAAK,aAAa;AAAA,EACpB;AAAA,EACA,IAAI,QAAQ;AACV,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,gBAAgB;AAAA,MAChD;AAAA,MACA,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EACA,OAAO,QAAQ;AACb,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,gBAAgB;AAAA,MAChD,QAAQ,OAAO;AAAA,MACf,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EACA,OAAO,QAAQ;AACb,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,gBAAgB;AAAA,MAChD;AAAA,MACA,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EACA,OAAO,IAAI;AACT,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,QAAQ,EAAE,EAAE,KAAK,UAAU,YAAU,KAAK,sBAAsB,gBAAgB;AAAA,MAC1F;AAAA,MACA,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC,CAAC,GAAG,IAAI,MAAM,EAAE,CAAC;AAAA,EACpB;AAAA,EACA,SAAS;AACP,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,0BAA0B;AAAA,MAC1D,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EACA,QAAQ,IAAI;AACV,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,0BAA0B;AAAA,MAC1D,OAAO,YAAY,EAAE;AAAA,MACrB,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC,EAAE,KAAK,IAAI,aAAW,WAAW,QAAQ,WAAW,IAAI,QAAQ,CAAC,IAAI,MAAS,CAAC;AAAA,EAClF;AAAA,EACA,aAAa,QAAQ;AAOnB,UAAM,WAAW,KAAK,wBAAwB,cAAc,KAAK,UAAU,EAAE;AAC7E,WAAO,KAAK,sBAAsB,0BAA0B;AAAA,MAC1D,OAAO;AAAA,MACP,SAAS,SAAS;AAAA,MAClB,IAAI;AAAA,IACN,CAAC;AAAA,EACH;AACF;",
  "names": ["qs", "p", "object", "parentObject", "c"]
}
