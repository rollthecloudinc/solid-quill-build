{
  "version": 3,
  "sources": ["../../@rollthecloudinc/bridge/fesm2022/rollthecloudinc-bridge.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { Injectable, provideAppInitializer, inject, NgModule } from '@angular/core';\nimport * as i1 from '@rollthecloudinc/plugin';\nimport { Plugin, BasePluginManager, PluginDef } from '@rollthecloudinc/plugin';\nimport { of } from 'rxjs';\nimport * as i2 from '@rollthecloudinc/utils';\nclass PublicApiBridgeService {\n  static {\n    this.\u0275fac = function PublicApiBridgeService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PublicApiBridgeService)();\n    };\n  }\n  static {\n    this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n      token: PublicApiBridgeService,\n      factory: PublicApiBridgeService.\u0275fac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(PublicApiBridgeService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass BridgeBuilderPlugin extends Plugin {\n  constructor(data) {\n    super(data);\n    if (data) {\n      this.build = data.build;\n    }\n  }\n}\nconst bridgeAppInit = builder => {\n  return () => new Promise(res => {\n    builder.build();\n    res();\n  });\n};\nconst testBridgeFactory = () => {\n  return new BridgeBuilderPlugin({\n    id: 'test',\n    title: 'Test',\n    build: () => {\n      PublicApiBridgeService.prototype['sayHello2'] = () => {\n        alert('say hello 2');\n      };\n    }\n  });\n};\nclass BridgeBuilderPluginManager extends BasePluginManager {\n  constructor(pcm, moduleLoader) {\n    super(pcm, moduleLoader);\n  }\n  pluginDef() {\n    return of(new PluginDef({\n      name: 'bridgebuilder'\n    }));\n  }\n  static {\n    this.\u0275fac = function BridgeBuilderPluginManager_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BridgeBuilderPluginManager)(i0.\u0275\u0275inject(i1.PluginConfigurationManager), i0.\u0275\u0275inject(i2.ModuleLoaderService));\n    };\n  }\n  static {\n    this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n      token: BridgeBuilderPluginManager,\n      factory: BridgeBuilderPluginManager.\u0275fac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(BridgeBuilderPluginManager, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [{\n    type: i1.PluginConfigurationManager\n  }, {\n    type: i2.ModuleLoaderService\n  }], null);\n})();\nclass BridgeBuilderService {\n  constructor(bpm) {\n    this.bpm = bpm;\n  }\n  build() {\n    try {\n      console.log('build bridge...');\n      this.bpm.getPlugins().subscribe(plugins => {\n        Array.from(plugins).forEach(([k, p]) => {\n          p.build();\n          console.log('bridge build: ' + k);\n        });\n      });\n      console.log('bridge built.');\n    } catch (e) {}\n  }\n  static {\n    this.\u0275fac = function BridgeBuilderService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BridgeBuilderService)(i0.\u0275\u0275inject(BridgeBuilderPluginManager));\n    };\n  }\n  static {\n    this.\u0275prov = /* @__PURE__ */i0.\u0275\u0275defineInjectable({\n      token: BridgeBuilderService,\n      factory: BridgeBuilderService.\u0275fac,\n      providedIn: 'root'\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(BridgeBuilderService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], () => [{\n    type: BridgeBuilderPluginManager\n  }], null);\n})();\nclass BridgeModule {\n  constructor(bmp) {\n    console.log('bridge constructor');\n    bmp.register(testBridgeFactory());\n  }\n  static {\n    this.\u0275fac = function BridgeModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || BridgeModule)(i0.\u0275\u0275inject(BridgeBuilderPluginManager));\n    };\n  }\n  static {\n    this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n      type: BridgeModule\n    });\n  }\n  static {\n    this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n      providers: [provideAppInitializer(() => {\n        const initializerFn = bridgeAppInit(inject(BridgeBuilderService));\n        return initializerFn();\n      })]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(BridgeModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [],\n      imports: [],\n      exports: [],\n      providers: [provideAppInitializer(() => {\n        const initializerFn = bridgeAppInit(inject(BridgeBuilderService));\n        return initializerFn();\n      })]\n    }]\n  }], () => [{\n    type: BridgeBuilderPluginManager\n  }], null);\n})();\n\n/*\n * Public API Surface of bridge\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BridgeBuilderPlugin, BridgeBuilderPluginManager, BridgeModule, PublicApiBridgeService };\n"],
  "mappings": "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",
  "names": []
}
