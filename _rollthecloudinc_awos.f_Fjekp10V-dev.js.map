{
  "version": 3,
  "sources": ["../../@rollthecloudinc/awos/fesm2022/rollthecloudinc-awos.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { PLATFORM_ID, Inject, NgModule } from '@angular/core';\nimport * as i2 from '@rollthecloudinc/auth';\nimport { AuthModule } from '@rollthecloudinc/auth';\nimport * as i5 from '@rollthecloudinc/awcog';\nimport { COGNITO_SETTINGS } from '@rollthecloudinc/awcog';\nimport * as i1 from '@rollthecloudinc/crud';\nimport { CrudAdaptorPlugin, CrudModule } from '@rollthecloudinc/crud';\nimport { of, forkJoin, from, firstValueFrom } from 'rxjs';\nimport { SignatureV4 } from '@aws-sdk/signature-v4';\nimport { HttpRequest } from '@aws-sdk/protocol-http';\nimport * as sha256 from '@aws-crypto/sha256-js';\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\nimport { CognitoIdentityClient } from '@aws-sdk/client-cognito-identity';\nimport { switchMap, map, tap, catchError, take } from 'rxjs/operators';\nimport * as i3 from '@rollthecloudinc/dparam';\nimport * as i4 from '@angular/common/http';\nconst opensearchTemplateCrudAdaptorPluginFactory = (platformId, authFacade, cognitoSettings, paramsEvaluatorService, http) => {\n  return new CrudAdaptorPlugin({\n    id: 'aws_opensearch_template',\n    title: 'AWS Opensearch Template',\n    create: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }),\n    delete: ({}) => of({\n      success: false\n    }),\n    query: ({\n      rule,\n      params\n    }) => of({\n      entities: [],\n      success: false\n    }).pipe(switchMap(() => params && Object.keys(params).length !== 0 ? forkJoin(Object.keys(params).map(name => paramsEvaluatorService.paramValue(params[name], new Map()).pipe(map(v => ({\n      [name]: v\n    }))))).pipe(map(groups => groups.reduce((p, c) => ({\n      ...p,\n      ...c\n    }), {})),\n    // default options go here instead of empty object.\n    map(options => ({\n      options\n    }))) : of({\n      options: {}\n    })), map(({\n      options\n    }) => ({\n      options,\n      body: JSON.stringify({\n        id: options.id,\n        params: rule ? rule.conditions.all.reduce((p, c) => ({\n          ...p,\n          ...c.any.reduce((p2, c2) => ({\n            ...p2,\n            [c2.path.substr(2)]: [...(p2[c2.path.substr(2)] ? p2[c2.path.substr(2)] : []), JSON.parse(decodeURIComponent(c2.value))]\n          }), {})\n        }), {}) : {}\n      })\n    })), tap(({\n      body\n    }) => console.log('open search template query body', body)), switchMap(({\n      options,\n      body\n    }) => createSignedHttpRequest({\n      method: \"POST\",\n      body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_search/template`,\n      protocol: 'https:',\n      service: \"es\",\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options\n    })))), switchMap(({\n      signedHttpRequest,\n      options\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_search/template`;\n      return http.post(url, signedHttpRequest.body, {\n        headers: signedHttpRequest.headers,\n        withCredentials: false\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(({\n      res,\n      options\n    }) => ({\n      entities: options.hits && res && res.hits && res.hits.hits ? res.hits.hits.map(h => options.source ? h._source : h) : [res],\n      success: true\n    })))\n  });\n};\nconst opensearchEntityCrudAdaptorPluginFactory = (authFacade, cognitoSettings, paramsEvaluatorService, http) => {\n  return new CrudAdaptorPlugin({\n    id: 'aws_opensearch_entity',\n    title: 'AWS Opensearch Entity',\n    create: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }).pipe(paramsEvaluatorService.resolveParams({\n      params\n    }), switchMap(({\n      options\n    }) => identity({\n      object,\n      parentObject\n    }).pipe(map(({\n      identity\n    }) => ({\n      identity,\n      options\n    })))), switchMap(({\n      options,\n      identity\n    }) => createSignedHttpRequest({\n      method: \"PUT\",\n      body: JSON.stringify(object),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identity}`,\n      protocol: 'https:',\n      service: \"es\",\n      ...{\n        ...(options.pipeline ? {\n          query: {\n            pipeline: options.pipeline\n          }\n        } : {})\n      },\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      identity\n    })))), switchMap(({\n      signedHttpRequest,\n      options,\n      identity\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_doc/${identity}`;\n      return http.put(url, JSON.stringify(object), {\n        headers: signedHttpRequest.headers,\n        withCredentials: false,\n        params: {\n          ...(options.pipeline ? {\n            pipeline: options.pipeline\n          } : {})\n        }\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(() => ({\n      success: true\n    }))),\n    read: ({}) => of({\n      success: false\n    }),\n    update: ({\n      object,\n      identity,\n      params,\n      parentObject\n    }) => of({\n      success: false\n    }).pipe(paramsEvaluatorService.resolveParams({\n      params\n    }), switchMap(({\n      options\n    }) => identity({\n      object,\n      parentObject\n    }).pipe(map(({\n      identity\n    }) => ({\n      identity,\n      options\n    })))), switchMap(({\n      options,\n      identity\n    }) => createSignedHttpRequest({\n      method: \"PUT\",\n      body: JSON.stringify(object),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identity}`,\n      protocol: 'https:',\n      service: \"es\",\n      ...{\n        ...(options.pipeline ? {\n          query: {\n            pipeline: options.pipeline\n          }\n        } : {})\n      },\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      identity\n    })))), switchMap(({\n      signedHttpRequest,\n      options,\n      identity\n    }) => {\n      delete signedHttpRequest.headers.host;\n      const url = `https://${options.domain}.${options.region}.es.amazonaws.com/${options.index}/_doc/${identity}`;\n      return http.put(url, JSON.stringify(object), {\n        headers: signedHttpRequest.headers,\n        withCredentials: false,\n        params: {\n          ...(options.pipeline ? {\n            pipeline: options.pipeline\n          } : {})\n        }\n      }).pipe(map(res => ({\n        res,\n        options\n      })));\n    }), map(() => ({\n      success: true\n    }))),\n    delete: ({}) => of({\n      success: false\n    }),\n    query: ({\n      rule,\n      params\n    }) => of({\n      entities: [],\n      success: false\n    }).pipe(tap(() => {\n      console.log('crud open search query', rule, params);\n    }), paramsEvaluatorService.resolveParams({\n      params\n    }),\n    // This can be moved into crud adaptor and passed as argument.\n    map(({\n      options\n    }) => ({\n      options,\n      identityCondition: rule.conditions.all.map(c => c.any.find(c2 => c2.fact === 'identity')).find(c => !!c)\n    })), switchMap(({\n      options,\n      identityCondition\n    }) => createSignedHttpRequest({\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        host: `${options.domain}.${options.region}.es.amazonaws.com`\n      },\n      hostname: `${options.domain}.${options.region}.es.amazonaws.com`,\n      path: `/${options.index}/_doc/${identityCondition ? identityCondition.value : ''}`,\n      protocol: 'https:',\n      service: \"es\",\n      cognitoSettings: cognitoSettings,\n      authFacade: authFacade\n    }).pipe(tap(() => console.log('.marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })')), tap(signedHttpRequest => delete signedHttpRequest.headers.host),\n    // map(signedHttpRequest => ({ signedHttpRequest, options, url: `${ isPlatformServer(platformId) ? /*'http://localhost:4000'*/ `${protocol}://${hostName}` /*`https://${options.bucket}.s3.amazonaws.com`*/ : `${protocol}://${hostName}` }${ `/awproxy/s3/${(options as any).bucket}` }${signedHttpRequest.path}` })),\n    map(signedHttpRequest => ({\n      signedHttpRequest,\n      options,\n      url: `https://${options.domain}.${options.region}.es.amazonaws.com${signedHttpRequest.path}`\n    })), tap(() => console.log('.marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })')), switchMap(({\n      signedHttpRequest,\n      url\n    }) => http.get(url, {\n      headers: signedHttpRequest.headers,\n      withCredentials: false\n    }).pipe(catchError(() => of(undefined)))), tap(() => console.log('.marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })')), map(res => ({\n      entities: res ? [res['_source']] : [],\n      success: res ? true : false\n    })))))\n  });\n};\nconst createSignedHttpRequest = ({\n  body,\n  headers,\n  hostname,\n  method = \"GET\",\n  path = \"/\",\n  port = 443,\n  protocol = \"https:\",\n  query,\n  service,\n  cognitoSettings,\n  authFacade\n}) => of(new HttpRequest({\n  body,\n  headers,\n  hostname,\n  method,\n  path,\n  port,\n  protocol,\n  query\n})).pipe(tap(() => console.log('.marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })')), switchMap(req => from(new SignatureV4({\n  credentials: fromCognitoIdentityPool({\n    client: new CognitoIdentityClient({\n      region: cognitoSettings.region\n    }),\n    identityPoolId: cognitoSettings.identityPoolId,\n    logins: {\n      [`cognito-idp.${cognitoSettings.region}.amazonaws.com/${cognitoSettings.userPoolId}`]: () => firstValueFrom(authFacade.getUser$.pipe(map(u => u ? u.id_token : undefined)))\n    }\n  }),\n  region: cognitoSettings.region,\n  service,\n  sha256: sha256.Sha256,\n  applyChecksum: false\n}).sign(req).then(signedReq => {\n  console.log('.marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })');\n  return signedReq;\n})).pipe(tap(() => console.log('.marker({ /os/sign/after/sig })')), take(1))), map(req => req), tap(() => console.log('.marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })')));\nclass AwosModule {\n  constructor(cognitoSettings, platformId, cpm, authFacade, paramsEvaluatorService, http) {\n    cpm.register(opensearchTemplateCrudAdaptorPluginFactory(platformId, authFacade, cognitoSettings, paramsEvaluatorService, http));\n    cpm.register(opensearchEntityCrudAdaptorPluginFactory(authFacade, cognitoSettings, paramsEvaluatorService, http));\n  }\n  static {\n    this.\u0275fac = function AwosModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AwosModule)(i0.\u0275\u0275inject(COGNITO_SETTINGS), i0.\u0275\u0275inject(PLATFORM_ID), i0.\u0275\u0275inject(i1.CrudAdaptorPluginManager), i0.\u0275\u0275inject(i2.AuthFacade), i0.\u0275\u0275inject(i3.ParamEvaluatorService), i0.\u0275\u0275inject(i4.HttpClient));\n    };\n  }\n  static {\n    this.\u0275mod = /* @__PURE__ */i0.\u0275\u0275defineNgModule({\n      type: AwosModule\n    });\n  }\n  static {\n    this.\u0275inj = /* @__PURE__ */i0.\u0275\u0275defineInjector({\n      imports: [AuthModule, CrudModule]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.\u0275setClassMetadata(AwosModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [],\n      imports: [AuthModule, CrudModule],\n      exports: []\n    }]\n  }], () => [{\n    type: i5.CognitoSettings,\n    decorators: [{\n      type: Inject,\n      args: [COGNITO_SETTINGS]\n    }]\n  }, {\n    type: Object,\n    decorators: [{\n      type: Inject,\n      args: [PLATFORM_ID]\n    }]\n  }, {\n    type: i1.CrudAdaptorPluginManager\n  }, {\n    type: i2.AuthFacade\n  }, {\n    type: i3.ParamEvaluatorService\n  }, {\n    type: i4.HttpClient\n  }], null);\n})();\n\n/*\n * Public API Surface of awos\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AwosModule };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA,YAAY,QAAQ;AACpB,SAAS,aAAa,QAAQ,gBAAgB;AAC9C,YAAY,QAAQ;AACpB,SAAS,kBAAkB;AAC3B,YAAY,QAAQ;AACpB,SAAS,wBAAwB;AACjC,YAAY,QAAQ;AACpB,SAAS,mBAAmB,kBAAkB;AAI9C,aAAwB;AAFxB,SAAS,mBAAmB;AAC5B,SAAS,mBAAmB;AAE5B,SAAS,+BAA+B;AACxC,SAAS,6BAA6B;AACtC,SAAS,WAAW,KAAK,KAAK,YAAY,YAAY;AACtD,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,IAAM,6CAA6C,CAAC,YAAY,YAAY,iBAAiB,wBAAwB,SAAS;AAC5H,SAAO,IAAI,kBAAkB;AAAA,IAC3B,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ,CAAC;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,SAAS;AAAA,IACX,CAAC;AAAA,IACD,MAAM,CAAC,CAAC,MAAM,GAAG;AAAA,MACf,SAAS;AAAA,IACX,CAAC;AAAA,IACD,QAAQ,CAAC;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,SAAS;AAAA,IACX,CAAC;AAAA,IACD,QAAQ,CAAC,CAAC,MAAM,GAAG;AAAA,MACjB,SAAS;AAAA,IACX,CAAC;AAAA,IACD,OAAO,CAAC;AAAA,MACN;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,UAAU,CAAC;AAAA,MACX,SAAS;AAAA,IACX,CAAC,EAAE,KAAK,UAAU,MAAM,UAAU,OAAO,KAAK,MAAM,EAAE,WAAW,IAAI,SAAS,OAAO,KAAK,MAAM,EAAE,IAAI,UAAQ,uBAAuB,WAAW,OAAO,IAAI,GAAG,oBAAI,IAAI,CAAC,EAAE,KAAK,IAAI,QAAM;AAAA,MACtL,CAAC,IAAI,GAAG;AAAA,IACV,EAAE,CAAC,CAAC,CAAC,EAAE;AAAA,MAAK,IAAI,YAAU,OAAO,OAAO,CAAC,GAAG,MAAO,kCAC9C,IACA,IACD,CAAC,CAAC,CAAC;AAAA;AAAA,MAEP,IAAI,cAAY;AAAA,QACd;AAAA,MACF,EAAE;AAAA,IAAC,IAAI,GAAG;AAAA,MACR,SAAS,CAAC;AAAA,IACZ,CAAC,CAAC,GAAG,IAAI,CAAC;AAAA,MACR;AAAA,IACF,OAAO;AAAA,MACL;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,IAAI,QAAQ;AAAA,QACZ,QAAQ,OAAO,KAAK,WAAW,IAAI,OAAO,CAAC,GAAG,MAAO,kCAChD,IACA,EAAE,IAAI,OAAO,CAAC,IAAI,OAAQ,iCACxB,KADwB;AAAA,UAE3B,CAAC,GAAG,KAAK,OAAO,CAAC,CAAC,GAAG,CAAC,GAAI,GAAG,GAAG,KAAK,OAAO,CAAC,CAAC,IAAI,GAAG,GAAG,KAAK,OAAO,CAAC,CAAC,IAAI,CAAC,GAAI,KAAK,MAAM,mBAAmB,GAAG,KAAK,CAAC,CAAC;AAAA,QACzH,IAAI,CAAC,CAAC,IACJ,CAAC,CAAC,IAAI,CAAC;AAAA,MACb,CAAC;AAAA,IACH,EAAE,GAAG,IAAI,CAAC;AAAA,MACR;AAAA,IACF,MAAM,QAAQ,IAAI,mCAAmC,IAAI,CAAC,GAAG,UAAU,CAAC;AAAA,MACtE;AAAA,MACA;AAAA,IACF,MAAM,wBAAwB;AAAA,MAC5B,QAAQ;AAAA,MACR;AAAA,MACA,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,MAAM,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC3C;AAAA,MACA,UAAU,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC7C,MAAM,IAAI,QAAQ,KAAK;AAAA,MACvB,UAAU;AAAA,MACV,SAAS;AAAA,MACT;AAAA,MACA;AAAA,IACF,CAAC,EAAE,KAAK,IAAI,wBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA;AAAA,IACF,MAAM;AACJ,aAAO,kBAAkB,QAAQ;AACjC,YAAM,MAAM,WAAW,QAAQ,MAAM,IAAI,QAAQ,MAAM,qBAAqB,QAAQ,KAAK;AACzF,aAAO,KAAK,KAAK,KAAK,kBAAkB,MAAM;AAAA,QAC5C,SAAS,kBAAkB;AAAA,QAC3B,iBAAiB;AAAA,MACnB,CAAC,EAAE,KAAK,IAAI,UAAQ;AAAA,QAClB;AAAA,QACA;AAAA,MACF,EAAE,CAAC;AAAA,IACL,CAAC,GAAG,IAAI,CAAC;AAAA,MACP;AAAA,MACA;AAAA,IACF,OAAO;AAAA,MACL,UAAU,QAAQ,QAAQ,OAAO,IAAI,QAAQ,IAAI,KAAK,OAAO,IAAI,KAAK,KAAK,IAAI,OAAK,QAAQ,SAAS,EAAE,UAAU,CAAC,IAAI,CAAC,GAAG;AAAA,MAC1H,SAAS;AAAA,IACX,EAAE,CAAC;AAAA,EACL,CAAC;AACH;AACA,IAAM,2CAA2C,CAAC,YAAY,iBAAiB,wBAAwB,SAAS;AAC9G,SAAO,IAAI,kBAAkB;AAAA,IAC3B,IAAI;AAAA,IACJ,OAAO;AAAA,IACP,QAAQ,CAAC;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,SAAS;AAAA,IACX,CAAC,EAAE,KAAK,uBAAuB,cAAc;AAAA,MAC3C;AAAA,IACF,CAAC,GAAG,UAAU,CAAC;AAAA,MACb;AAAA,IACF,MAAM,SAAS;AAAA,MACb;AAAA,MACA;AAAA,IACF,CAAC,EAAE,KAAK,IAAI,CAAC;AAAA,MACX,UAAAA;AAAA,IACF,OAAO;AAAA,MACL,UAAAA;AAAA,MACA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA,UAAAA;AAAA,IACF,MAAM,wBAAwB;AAAA,MAC5B,QAAQ;AAAA,MACR,MAAM,KAAK,UAAU,MAAM;AAAA,MAC3B,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,MAAM,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC3C;AAAA,MACA,UAAU,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC7C,MAAM,IAAI,QAAQ,KAAK,SAASA,SAAQ;AAAA,MACxC,UAAU;AAAA,MACV,SAAS;AAAA,OACN,mBACG,QAAQ,WAAW;AAAA,MACrB,OAAO;AAAA,QACL,UAAU,QAAQ;AAAA,MACpB;AAAA,IACF,IAAI,CAAC,KAhBqB;AAAA,MAkB5B;AAAA,MACA;AAAA,IACF,EAAC,EAAE,KAAK,IAAI,wBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,MACA,UAAAA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA;AAAA,MACA,UAAAA;AAAA,IACF,MAAM;AACJ,aAAO,kBAAkB,QAAQ;AACjC,YAAM,MAAM,WAAW,QAAQ,MAAM,IAAI,QAAQ,MAAM,qBAAqB,QAAQ,KAAK,SAASA,SAAQ;AAC1G,aAAO,KAAK,IAAI,KAAK,KAAK,UAAU,MAAM,GAAG;AAAA,QAC3C,SAAS,kBAAkB;AAAA,QAC3B,iBAAiB;AAAA,QACjB,QAAQ,mBACF,QAAQ,WAAW;AAAA,UACrB,UAAU,QAAQ;AAAA,QACpB,IAAI,CAAC;AAAA,MAET,CAAC,EAAE,KAAK,IAAI,UAAQ;AAAA,QAClB;AAAA,QACA;AAAA,MACF,EAAE,CAAC;AAAA,IACL,CAAC,GAAG,IAAI,OAAO;AAAA,MACb,SAAS;AAAA,IACX,EAAE,CAAC;AAAA,IACH,MAAM,CAAC,CAAC,MAAM,GAAG;AAAA,MACf,SAAS;AAAA,IACX,CAAC;AAAA,IACD,QAAQ,CAAC;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,SAAS;AAAA,IACX,CAAC,EAAE,KAAK,uBAAuB,cAAc;AAAA,MAC3C;AAAA,IACF,CAAC,GAAG,UAAU,CAAC;AAAA,MACb;AAAA,IACF,MAAM,SAAS;AAAA,MACb;AAAA,MACA;AAAA,IACF,CAAC,EAAE,KAAK,IAAI,CAAC;AAAA,MACX,UAAAA;AAAA,IACF,OAAO;AAAA,MACL,UAAAA;AAAA,MACA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA,UAAAA;AAAA,IACF,MAAM,wBAAwB;AAAA,MAC5B,QAAQ;AAAA,MACR,MAAM,KAAK,UAAU,MAAM;AAAA,MAC3B,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,MAAM,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC3C;AAAA,MACA,UAAU,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC7C,MAAM,IAAI,QAAQ,KAAK,SAASA,SAAQ;AAAA,MACxC,UAAU;AAAA,MACV,SAAS;AAAA,OACN,mBACG,QAAQ,WAAW;AAAA,MACrB,OAAO;AAAA,QACL,UAAU,QAAQ;AAAA,MACpB;AAAA,IACF,IAAI,CAAC,KAhBqB;AAAA,MAkB5B;AAAA,MACA;AAAA,IACF,EAAC,EAAE,KAAK,IAAI,wBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,MACA,UAAAA;AAAA,IACF,EAAE,CAAC,CAAC,GAAG,UAAU,CAAC;AAAA,MAChB;AAAA,MACA;AAAA,MACA,UAAAA;AAAA,IACF,MAAM;AACJ,aAAO,kBAAkB,QAAQ;AACjC,YAAM,MAAM,WAAW,QAAQ,MAAM,IAAI,QAAQ,MAAM,qBAAqB,QAAQ,KAAK,SAASA,SAAQ;AAC1G,aAAO,KAAK,IAAI,KAAK,KAAK,UAAU,MAAM,GAAG;AAAA,QAC3C,SAAS,kBAAkB;AAAA,QAC3B,iBAAiB;AAAA,QACjB,QAAQ,mBACF,QAAQ,WAAW;AAAA,UACrB,UAAU,QAAQ;AAAA,QACpB,IAAI,CAAC;AAAA,MAET,CAAC,EAAE,KAAK,IAAI,UAAQ;AAAA,QAClB;AAAA,QACA;AAAA,MACF,EAAE,CAAC;AAAA,IACL,CAAC,GAAG,IAAI,OAAO;AAAA,MACb,SAAS;AAAA,IACX,EAAE,CAAC;AAAA,IACH,QAAQ,CAAC,CAAC,MAAM,GAAG;AAAA,MACjB,SAAS;AAAA,IACX,CAAC;AAAA,IACD,OAAO,CAAC;AAAA,MACN;AAAA,MACA;AAAA,IACF,MAAM,GAAG;AAAA,MACP,UAAU,CAAC;AAAA,MACX,SAAS;AAAA,IACX,CAAC,EAAE;AAAA,MAAK,IAAI,MAAM;AAChB,gBAAQ,IAAI,0BAA0B,MAAM,MAAM;AAAA,MACpD,CAAC;AAAA,MAAG,uBAAuB,cAAc;AAAA,QACvC;AAAA,MACF,CAAC;AAAA;AAAA,MAED,IAAI,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AAAA,QACL;AAAA,QACA,mBAAmB,KAAK,WAAW,IAAI,IAAI,OAAK,EAAE,IAAI,KAAK,QAAM,GAAG,SAAS,UAAU,CAAC,EAAE,KAAK,OAAK,CAAC,CAAC,CAAC;AAAA,MACzG,EAAE;AAAA,MAAG,UAAU,CAAC;AAAA,QACd;AAAA,QACA;AAAA,MACF,MAAM,wBAAwB;AAAA,QAC5B,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,MAAM,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,QAC3C;AAAA,QACA,UAAU,GAAG,QAAQ,MAAM,IAAI,QAAQ,MAAM;AAAA,QAC7C,MAAM,IAAI,QAAQ,KAAK,SAAS,oBAAoB,kBAAkB,QAAQ,EAAE;AAAA,QAChF,UAAU;AAAA,QACV,SAAS;AAAA,QACT;AAAA,QACA;AAAA,MACF,CAAC,EAAE;AAAA,QAAK,IAAI,MAAM,QAAQ,IAAI,oGAAoG,CAAC;AAAA,QAAG,IAAI,uBAAqB,OAAO,kBAAkB,QAAQ,IAAI;AAAA;AAAA,QAEpM,IAAI,wBAAsB;AAAA,UACxB;AAAA,UACA;AAAA,UACA,KAAK,WAAW,QAAQ,MAAM,IAAI,QAAQ,MAAM,oBAAoB,kBAAkB,IAAI;AAAA,QAC5F,EAAE;AAAA,QAAG,IAAI,MAAM,QAAQ,IAAI,6EAA6E,CAAC;AAAA,QAAG,UAAU,CAAC;AAAA,UACrH;AAAA,UACA;AAAA,QACF,MAAM,KAAK,IAAI,KAAK;AAAA,UAClB,SAAS,kBAAkB;AAAA,UAC3B,iBAAiB;AAAA,QACnB,CAAC,EAAE,KAAK,WAAW,MAAM,GAAG,MAAS,CAAC,CAAC,CAAC;AAAA,QAAG,IAAI,MAAM,QAAQ,IAAI,kFAAkF,CAAC;AAAA,QAAG,IAAI,UAAQ;AAAA,UACjK,UAAU,MAAM,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC;AAAA,UACpC,SAAS,MAAM,OAAO;AAAA,QACxB,EAAE;AAAA,MAAC,CAAC;AAAA,IAAC;AAAA,EACP,CAAC;AACH;AACA,IAAM,0BAA0B,CAAC;AAAA,EAC/B;AAAA,EACA;AAAA,EACA;AAAA,EACA,SAAS;AAAA,EACT,OAAO;AAAA,EACP,OAAO;AAAA,EACP,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM,GAAG,IAAI,YAAY;AAAA,EACvB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,CAAC,CAAC,EAAE,KAAK,IAAI,MAAM,QAAQ,IAAI,gFAAgF,CAAC,GAAG,UAAU,SAAO,KAAK,IAAI,YAAY;AAAA,EACvJ,aAAa,wBAAwB;AAAA,IACnC,QAAQ,IAAI,sBAAsB;AAAA,MAChC,QAAQ,gBAAgB;AAAA,IAC1B,CAAC;AAAA,IACD,gBAAgB,gBAAgB;AAAA,IAChC,QAAQ;AAAA,MACN,CAAC,eAAe,gBAAgB,MAAM,kBAAkB,gBAAgB,UAAU,EAAE,GAAG,MAAM,eAAe,WAAW,SAAS,KAAK,IAAI,OAAK,IAAI,EAAE,WAAW,MAAS,CAAC,CAAC;AAAA,IAC5K;AAAA,EACF,CAAC;AAAA,EACD,QAAQ,gBAAgB;AAAA,EACxB;AAAA,EACA,QAAe;AAAA,EACf,eAAe;AACjB,CAAC,EAAE,KAAK,GAAG,EAAE,KAAK,eAAa;AAC7B,UAAQ,IAAI,oEAAoE;AAChF,SAAO;AACT,CAAC,CAAC,EAAE,KAAK,IAAI,MAAM,QAAQ,IAAI,iCAAiC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,SAAO,GAAG,GAAG,IAAI,MAAM,QAAQ,IAAI,8EAA8E,CAAC,CAAC;AACtM,IAAM,aAAN,MAAM,YAAW;AAAA,EACf,YAAY,iBAAiB,YAAY,KAAK,YAAY,wBAAwB,MAAM;AACtF,QAAI,SAAS,2CAA2C,YAAY,YAAY,iBAAiB,wBAAwB,IAAI,CAAC;AAC9H,QAAI,SAAS,yCAAyC,YAAY,iBAAiB,wBAAwB,IAAI,CAAC;AAAA,EAClH;AAAA,EACA,OAAO;AACL,SAAK,YAAO,SAAS,mBAAmB,mBAAmB;AACzD,aAAO,KAAK,qBAAqB,aAAe,sBAAS,gBAAgB,GAAM,sBAAS,WAAW,GAAM,sBAAY,2BAAwB,GAAM,sBAAY,aAAU,GAAM,sBAAY,wBAAqB,GAAM,sBAAY,aAAU,CAAC;AAAA,IAC/O;AAAA,EACF;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,8BAAiB;AAAA,MAC7C,MAAM;AAAA,IACR,CAAC;AAAA,EACH;AAAA,EACA,OAAO;AACL,SAAK,YAAsB,gBAAG,8BAAiB;AAAA,MAC7C,SAAS,CAAC,YAAY,UAAU;AAAA,IAClC,CAAC;AAAA,EACH;AACF;AAAA,CACC,MAAM;AACL,GAAC,OAAO,cAAc,eAAe,cAAiB,0BAAkB,YAAY,CAAC;AAAA,IACnF,MAAM;AAAA,IACN,MAAM,CAAC;AAAA,MACL,cAAc,CAAC;AAAA,MACf,SAAS,CAAC,YAAY,UAAU;AAAA,MAChC,SAAS,CAAC;AAAA,IACZ,CAAC;AAAA,EACH,CAAC,GAAG,MAAM,CAAC;AAAA,IACT,MAAS;AAAA,IACT,YAAY,CAAC;AAAA,MACX,MAAM;AAAA,MACN,MAAM,CAAC,gBAAgB;AAAA,IACzB,CAAC;AAAA,EACH,GAAG;AAAA,IACD,MAAM;AAAA,IACN,YAAY,CAAC;AAAA,MACX,MAAM;AAAA,MACN,MAAM,CAAC,WAAW;AAAA,IACpB,CAAC;AAAA,EACH,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,GAAG;AAAA,IACD,MAAS;AAAA,EACX,CAAC,GAAG,IAAI;AACV,GAAG;",
  "names": ["identity"]
}
