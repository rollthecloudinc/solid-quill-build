{
  "version": 3,
  "sources": ["../../@angular/core/fesm2022/primitives/signals.mjs"],
  "sourcesContent": ["/**\n * @license Angular v20.3.7\n * (c) 2010-2025 Google LLC. https://angular.dev/\n * License: MIT\n */\n\nimport { SIGNAL, consumerMarkDirty, REACTIVE_NODE, consumerDestroy, isInNotificationPhase, consumerPollProducersForChange, consumerBeforeComputation, consumerAfterComputation } from '../signal.mjs';\nexport { SIGNAL_NODE, createComputed, createSignal, defaultEquals, finalizeConsumerAfterComputation, getActiveConsumer, isReactive, producerAccessed, producerIncrementEpoch, producerMarkClean, producerNotifyConsumers, producerUpdateValueVersion, producerUpdatesAllowed, resetConsumerBeforeComputation, runPostProducerCreatedFn, runPostSignalSetFn, setActiveConsumer, setPostProducerCreatedFn, setPostSignalSetFn, setThrowInvalidWriteToSignalError, signalGetFn, signalSetFn, signalUpdateFn } from '../signal.mjs';\nexport { BASE_EFFECT_NODE, createLinkedSignal, linkedSignalSetFn, linkedSignalUpdateFn, runEffect, untracked } from '../effect.mjs';\nexport { setAlternateWeakRefImpl } from '../weak_ref.mjs';\n\n/**\n * A custom formatter which renders signals in an easy-to-read format.\n *\n * @see https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html\n */\nconst formatter = {\n    /**\n     *  If the function returns `null`, the formatter is not used for this reference\n     */\n    header: (sig, config) => {\n        if (!isSignal(sig) || config?.ngSkipFormatting)\n            return null;\n        let value;\n        try {\n            value = sig();\n        }\n        catch {\n            // In case the signl throws, we don't want to break the formatting.\n            return ['span', 'Signal(\u26A0\uFE0F Error)'];\n        }\n        const kind = 'computation' in sig[SIGNAL] ? 'Computed' : 'Signal';\n        const isPrimitive = value === null || (!Array.isArray(value) && typeof value !== 'object');\n        return [\n            'span',\n            {},\n            ['span', {}, `${kind}(`],\n            (() => {\n                if (isSignal(value)) {\n                    // Recursively call formatter. Could return an `object` to call the formatter through DevTools,\n                    // but then recursive signals will render multiple expando arrows which is an awkward UX.\n                    return formatter.header(value, config);\n                }\n                else if (isPrimitive && value !== undefined && typeof value !== 'function') {\n                    // Use built-in rendering for primitives which applies standard syntax highlighting / theming.\n                    // Can't do this for `undefined` however, as the browser thinks we forgot to provide an object.\n                    // Also don't want to do this for functions which render nested expando arrows.\n                    return ['object', { object: value }];\n                }\n                else {\n                    return prettifyPreview(value);\n                }\n            })(),\n            ['span', {}, `)`],\n        ];\n    },\n    hasBody: (sig, config) => {\n        if (!isSignal(sig))\n            return false;\n        try {\n            sig();\n        }\n        catch {\n            return false;\n        }\n        return !config?.ngSkipFormatting;\n    },\n    body: (sig, config) => {\n        // We can use sys colors to fit the current DevTools theme.\n        // Those are unfortunately only available on Chromium-based browsers.\n        // On Firefow we fall back to the default color\n        const color = 'var(--sys-color-primary)';\n        return [\n            'div',\n            { style: `background: #FFFFFF10; padding-left: 4px; padding-top: 2px; padding-bottom: 2px;` },\n            ['div', { style: `color: ${color}` }, 'Signal value: '],\n            ['div', { style: `padding-left: .5rem;` }, ['object', { object: sig(), config }]],\n            ['div', { style: `color: ${color}` }, 'Signal function: '],\n            [\n                'div',\n                { style: `padding-left: .5rem;` },\n                ['object', { object: sig, config: { ...config, skipFormatting: true } }],\n            ],\n        ];\n    },\n};\nfunction prettifyPreview(value) {\n    if (value === null)\n        return 'null';\n    if (Array.isArray(value))\n        return `Array(${value.length})`;\n    if (value instanceof Element)\n        return `<${value.tagName.toLowerCase()}>`;\n    if (value instanceof URL)\n        return `URL`;\n    switch (typeof value) {\n        case 'undefined': {\n            return 'undefined';\n        }\n        case 'function': {\n            if ('prototype' in value) {\n                // This is what Chrome renders, can't use `object` though because it creates a nested expando arrow.\n                return 'class';\n            }\n            else {\n                return '() => {\u2026}';\n            }\n        }\n        case 'object': {\n            if (value.constructor.name === 'Object') {\n                return '{\u2026}';\n            }\n            else {\n                return `${value.constructor.name} {}`;\n            }\n        }\n        default: {\n            return ['object', { object: value, config: { skipFormatting: true } }];\n        }\n    }\n}\nfunction isSignal(value) {\n    return value[SIGNAL] !== undefined;\n}\n/**\n * Installs the custom formatter into custom formatting on Signals in the devtools.\n *\n * Supported by both Chrome and Firefox.\n *\n * @see https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html\n */\nfunction installDevToolsSignalFormatter() {\n    globalThis.devtoolsFormatters ??= [];\n    if (!globalThis.devtoolsFormatters.some((f) => f === formatter)) {\n        globalThis.devtoolsFormatters.push(formatter);\n    }\n}\n\nfunction createWatch(fn, schedule, allowSignalWrites) {\n    const node = Object.create(WATCH_NODE);\n    if (allowSignalWrites) {\n        node.consumerAllowSignalWrites = true;\n    }\n    node.fn = fn;\n    node.schedule = schedule;\n    const registerOnCleanup = (cleanupFn) => {\n        node.cleanupFn = cleanupFn;\n    };\n    function isWatchNodeDestroyed(node) {\n        return node.fn === null && node.schedule === null;\n    }\n    function destroyWatchNode(node) {\n        if (!isWatchNodeDestroyed(node)) {\n            consumerDestroy(node); // disconnect watcher from the reactive graph\n            node.cleanupFn();\n            // nullify references to the integration functions to mark node as destroyed\n            node.fn = null;\n            node.schedule = null;\n            node.cleanupFn = NOOP_CLEANUP_FN;\n        }\n    }\n    const run = () => {\n        if (node.fn === null) {\n            // trying to run a destroyed watch is noop\n            return;\n        }\n        if (isInNotificationPhase()) {\n            throw new Error(typeof ngDevMode !== 'undefined' && ngDevMode\n                ? 'Schedulers cannot synchronously execute watches while scheduling.'\n                : '');\n        }\n        node.dirty = false;\n        if (node.version > 0 && !consumerPollProducersForChange(node)) {\n            return;\n        }\n        node.version++;\n        const prevConsumer = consumerBeforeComputation(node);\n        try {\n            node.cleanupFn();\n            node.cleanupFn = NOOP_CLEANUP_FN;\n            node.fn(registerOnCleanup);\n        }\n        finally {\n            consumerAfterComputation(node, prevConsumer);\n        }\n    };\n    node.ref = {\n        notify: () => consumerMarkDirty(node),\n        run,\n        cleanup: () => node.cleanupFn(),\n        destroy: () => destroyWatchNode(node),\n        [SIGNAL]: node,\n    };\n    return node.ref;\n}\nconst NOOP_CLEANUP_FN = () => { };\n// Note: Using an IIFE here to ensure that the spread assignment is not considered\n// a side-effect, ending up preserving `COMPUTED_NODE` and `REACTIVE_NODE`.\n// TODO: remove when https://github.com/evanw/esbuild/issues/3392 is resolved.\nconst WATCH_NODE = /* @__PURE__ */ (() => {\n    return {\n        ...REACTIVE_NODE,\n        consumerIsAlwaysLive: true,\n        consumerAllowSignalWrites: false,\n        consumerMarkedDirty: (node) => {\n            if (node.schedule !== null) {\n                node.schedule(node.ref);\n            }\n        },\n        cleanupFn: NOOP_CLEANUP_FN,\n    };\n})();\n\n// We're using a top-level access to enable signal formatting whenever the signals package is loaded.\nif (typeof ngDevMode !== 'undefined' && ngDevMode) {\n    // tslint:disable-next-line: no-toplevel-property-access\n    installDevToolsSignalFormatter();\n}\n\nexport { REACTIVE_NODE, SIGNAL, consumerAfterComputation, consumerBeforeComputation, consumerDestroy, consumerMarkDirty, consumerPollProducersForChange, createWatch, installDevToolsSignalFormatter, isInNotificationPhase };\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAId,QAAQ,CAAC,KAAK,WAAW;AACrB,QAAI,CAAC,SAAS,GAAG,KAAK,QAAQ;AAC1B,aAAO;AACX,QAAI;AACJ,QAAI;AACA,cAAQ,IAAI;AAAA,IAChB,QACM;AAEF,aAAO,CAAC,QAAQ,4BAAkB;AAAA,IACtC;AACA,UAAM,OAAO,iBAAiB,IAAI,MAAM,IAAI,aAAa;AACzD,UAAM,cAAc,UAAU,QAAS,CAAC,MAAM,QAAQ,KAAK,KAAK,OAAO,UAAU;AACjF,WAAO;AAAA,MACH;AAAA,MACA,CAAC;AAAA,MACD,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,GAAG;AAAA,OACtB,MAAM;AACH,YAAI,SAAS,KAAK,GAAG;AAGjB,iBAAO,UAAU,OAAO,OAAO,MAAM;AAAA,QACzC,WACS,eAAe,UAAU,UAAa,OAAO,UAAU,YAAY;AAIxE,iBAAO,CAAC,UAAU,EAAE,QAAQ,MAAM,CAAC;AAAA,QACvC,OACK;AACD,iBAAO,gBAAgB,KAAK;AAAA,QAChC;AAAA,MACJ,GAAG;AAAA,MACH,CAAC,QAAQ,CAAC,GAAG,GAAG;AAAA,IACpB;AAAA,EACJ;AAAA,EACA,SAAS,CAAC,KAAK,WAAW;AACtB,QAAI,CAAC,SAAS,GAAG;AACb,aAAO;AACX,QAAI;AACA,UAAI;AAAA,IACR,QACM;AACF,aAAO;AAAA,IACX;AACA,WAAO,CAAC,QAAQ;AAAA,EACpB;AAAA,EACA,MAAM,CAAC,KAAK,WAAW;AAInB,UAAM,QAAQ;AACd,WAAO;AAAA,MACH;AAAA,MACA,EAAE,OAAO,mFAAmF;AAAA,MAC5F,CAAC,OAAO,EAAE,OAAO,UAAU,KAAK,GAAG,GAAG,gBAAgB;AAAA,MACtD,CAAC,OAAO,EAAE,OAAO,uBAAuB,GAAG,CAAC,UAAU,EAAE,QAAQ,IAAI,GAAG,OAAO,CAAC,CAAC;AAAA,MAChF,CAAC,OAAO,EAAE,OAAO,UAAU,KAAK,GAAG,GAAG,mBAAmB;AAAA,MACzD;AAAA,QACI;AAAA,QACA,EAAE,OAAO,uBAAuB;AAAA,QAChC,CAAC,UAAU,EAAE,QAAQ,KAAK,QAAQ,iCAAK,SAAL,EAAa,gBAAgB,KAAK,GAAE,CAAC;AAAA,MAC3E;AAAA,IACJ;AAAA,EACJ;AACJ;AACA,SAAS,gBAAgB,OAAO;AAC5B,MAAI,UAAU;AACV,WAAO;AACX,MAAI,MAAM,QAAQ,KAAK;AACnB,WAAO,SAAS,MAAM,MAAM;AAChC,MAAI,iBAAiB;AACjB,WAAO,IAAI,MAAM,QAAQ,YAAY,CAAC;AAC1C,MAAI,iBAAiB;AACjB,WAAO;AACX,UAAQ,OAAO,OAAO;AAAA,IAClB,KAAK,aAAa;AACd,aAAO;AAAA,IACX;AAAA,IACA,KAAK,YAAY;AACb,UAAI,eAAe,OAAO;AAEtB,eAAO;AAAA,MACX,OACK;AACD,eAAO;AAAA,MACX;AAAA,IACJ;AAAA,IACA,KAAK,UAAU;AACX,UAAI,MAAM,YAAY,SAAS,UAAU;AACrC,eAAO;AAAA,MACX,OACK;AACD,eAAO,GAAG,MAAM,YAAY,IAAI;AAAA,MACpC;AAAA,IACJ;AAAA,IACA,SAAS;AACL,aAAO,CAAC,UAAU,EAAE,QAAQ,OAAO,QAAQ,EAAE,gBAAgB,KAAK,EAAE,CAAC;AAAA,IACzE;AAAA,EACJ;AACJ;AACA,SAAS,SAAS,OAAO;AACrB,SAAO,MAAM,MAAM,MAAM;AAC7B;AAQA,SAAS,iCAAiC;AACtC,aAAW,uBAAuB,CAAC;AACnC,MAAI,CAAC,WAAW,mBAAmB,KAAK,CAAC,MAAM,MAAM,SAAS,GAAG;AAC7D,eAAW,mBAAmB,KAAK,SAAS;AAAA,EAChD;AACJ;AAEA,SAAS,YAAY,IAAI,UAAU,mBAAmB;AAClD,QAAM,OAAO,OAAO,OAAO,UAAU;AACrC,MAAI,mBAAmB;AACnB,SAAK,4BAA4B;AAAA,EACrC;AACA,OAAK,KAAK;AACV,OAAK,WAAW;AAChB,QAAM,oBAAoB,CAAC,cAAc;AACrC,SAAK,YAAY;AAAA,EACrB;AACA,WAAS,qBAAqBA,OAAM;AAChC,WAAOA,MAAK,OAAO,QAAQA,MAAK,aAAa;AAAA,EACjD;AACA,WAAS,iBAAiBA,OAAM;AAC5B,QAAI,CAAC,qBAAqBA,KAAI,GAAG;AAC7B,sBAAgBA,KAAI;AACpB,MAAAA,MAAK,UAAU;AAEf,MAAAA,MAAK,KAAK;AACV,MAAAA,MAAK,WAAW;AAChB,MAAAA,MAAK,YAAY;AAAA,IACrB;AAAA,EACJ;AACA,QAAM,MAAM,MAAM;AACd,QAAI,KAAK,OAAO,MAAM;AAElB;AAAA,IACJ;AACA,QAAI,sBAAsB,GAAG;AACzB,YAAM,IAAI,MAAM,OAAO,cAAc,eAAe,YAC9C,sEACA,EAAE;AAAA,IACZ;AACA,SAAK,QAAQ;AACb,QAAI,KAAK,UAAU,KAAK,CAAC,+BAA+B,IAAI,GAAG;AAC3D;AAAA,IACJ;AACA,SAAK;AACL,UAAM,eAAe,0BAA0B,IAAI;AACnD,QAAI;AACA,WAAK,UAAU;AACf,WAAK,YAAY;AACjB,WAAK,GAAG,iBAAiB;AAAA,IAC7B,UACA;AACI,+BAAyB,MAAM,YAAY;AAAA,IAC/C;AAAA,EACJ;AACA,OAAK,MAAM;AAAA,IACP,QAAQ,MAAM,kBAAkB,IAAI;AAAA,IACpC;AAAA,IACA,SAAS,MAAM,KAAK,UAAU;AAAA,IAC9B,SAAS,MAAM,iBAAiB,IAAI;AAAA,IACpC,CAAC,MAAM,GAAG;AAAA,EACd;AACA,SAAO,KAAK;AAChB;AACA,IAAM,kBAAkB,MAAM;AAAE;AAIhC,IAAM,aAA8B,uBAAM;AACtC,SAAO,iCACA,gBADA;AAAA,IAEH,sBAAsB;AAAA,IACtB,2BAA2B;AAAA,IAC3B,qBAAqB,CAAC,SAAS;AAC3B,UAAI,KAAK,aAAa,MAAM;AACxB,aAAK,SAAS,KAAK,GAAG;AAAA,MAC1B;AAAA,IACJ;AAAA,IACA,WAAW;AAAA,EACf;AACJ,GAAG;AAGH,IAAI,OAAO,cAAc,eAAe,WAAW;AAE/C,iCAA+B;AACnC;",
  "names": ["node"]
}
